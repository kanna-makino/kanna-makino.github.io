<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  
  
    <meta name="description" content="一爱代码，爱生活。">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    
    Kanna-Makino</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
<main class="content">
  <section class="jumbotron">
  <div class="video">
    
      <div class="video-frame">
        <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
      </div>
    
    <div class="video-media">
      <video playsinline="" autoplay="" loop="" muted="" data-autoplay=""
             poster="/images/ocean/ocean.png" x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">Kanna-Makino</a></h1>
      <p></p>
      <div><img src="https://zhwangart.github.io/images/shark-inverted.svg" class="brand" alt="Kanna-Makino"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>

<div id="landingpage">
  <section class="outer">
  <article class="articles">
    
    <h1 class="page-type-title"></h1>

    
      
        

<article id="post-川端康成《雪国》" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/01/23/川端康成《雪国》/">《雪国》——川端康成</a>
    </h2>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2019/01/23/川端康成《雪国》/" class="article-date">
  <time datetime="2019-01-23T12:19:22.000Z" itemprop="datePublished">01-23-2019</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/读书/">读书</a>
  </div>

      </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      
	    

	  
      
        <blockquote>
<p>穿过县界长长的隧道，便是雪国。夜空下一片白茫茫。火车在信号所前停了下来。</p>
<p>一位姑娘从对面座位上站起身子，把岛村座位前的玻璃窗打开。一股冷空气袭卷进来。姑娘将身子探出窗外，仿佛向远方呼唤似的喊道……</p>
</blockquote>
<blockquote>
<p>随着秋凉，每天都有昆虫在他房间里的榻榻米上死去。硬翅的昆虫，一翻过身就再也飞不起来。蜜蜂还可以爬爬跌跌一番，再倒下去爬不起来。由于季节转换而自然死亡，乍看好像是静静地死去，可是走近看，只见它们抽搐着腿脚和触角，痛苦地拼命挣扎着。这八叠大的榻榻米作为它们死亡的地方，未免显得太宽广了。</p>
</blockquote>
<blockquote>
<p>比头发丝还细的麻纱，若缺少雪天天然的潮湿，就很难办了。阴冷的季节对它似乎合适。古时有这样一种说法：三九寒天织出来的麻纱，三伏天穿上会令人觉得特别凉爽，这是由于阴阳自然的关系。</p>
<p>倾心于岛村的驹子，似乎在根性上也有某种内在的凉爽。因此，在驹子身上迸发出的奔放的热情，是岛村觉得格外可怜。</p>
<p>但是，这种挚爱之情，不像一件绉纱那样能留下实在的痕迹。纵然穿衣用的绉纱在工艺品中算是寿命最短的，但只要保管得当，五十年或更早的绉纱，穿在身上照样也不褪色。而人的这种依依之情，却没有绉纱寿命长。岛村茫然的这么想着，突然又浮现出为别的男人生了孩子、当了母亲的驹子的形象。他心中一惊，扫视了一下周围，觉得大概是自己太劳累了吧。</p>
</blockquote>
<blockquote>
<p>岛村无法相信呈弧状横跨太空的明亮光带竟会如此昏暗。大概是星空比朦胧的月夜更加黯淡的缘故吧。可是，银河比任何满月的时候都要澄澈明亮。地面却没什么投影，奇怪的是，驹子的脸活像一副旧面具，淡淡的浮现出来，散发出一股女人的芳香。</p>
<p>岛村抬头仰望，觉得银河仿佛要把这个大地拥抱过去。</p>
<p>犹如一条大光带的银河，使人觉得好像浸泡着岛村的身体，飘飘浮浮，然后伫立在天涯海角上。这虽是一种冷寂，但也给人某种神奇的魅惑之旅。</p>
</blockquote>
<blockquote>
<p>“这孩子疯了，她疯了！”</p>
<p>驹子发出疯狂的叫喊，岛村试图接近她，不料被一群汉子连推带搡撞到一边去。这些汉子是想从驹子手里接过叶子抱走。待岛村站稳了脚跟，抬头望去，银河好像哗啦一声，向他的心坎上倾泻了下来。</p>
</blockquote>
<p>读了一遍，除了驹子与岛村之间的关系、叶子的出场和去世之外，什么也没留下。没有体会到其中要表达的情感，只是从头到尾蕴含着一股无奈和哀伤。</p>
<p>驹子为了给未婚夫治病而沦为艺伎，倾心于岛村，在岛村看来却是一段徒劳的感情；叶子内心向往大城市的生活，希望离开乡下却未能如愿，牵挂自己在铁路工作的弟弟却无法相见，最终因火灾不幸去世。原本出身大城市衣食无忧想要改革日本舞蹈的岛村，在与驹子的相处以及叶子的去世中从自己的世界中解放了出来，改变了自己一直以来对事物的“徒劳”的看法。</p>
<blockquote>
<p>一直以来，困扰岛村的虚无背后的原因，是死亡带来的生命时长的局限，所导致的的人生一切事情的无意义。在叶子死亡的那一刻，岛村看到的，是失去了生命反而显得自由，生命通过变形得到了延续，生和死之间不再那么泾渭分明。如果生死界线真的变得模糊，那困扰岛村的虚无，或许将不复存在。</p>
</blockquote>
<p><a href="https://www.jianshu.com/p/f2f73e0a44d4" target="_blank" rel="noopener">《雪国》：理解虚无主义，才能读懂川端康成 </a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.youyou-2608.com/2019/01/23/川端康成《雪国》/" data-id="ck2sphcxy002tcs4newxdta6k"
         class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/读书/">读书</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        

<article id="post-《百年孤独》" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/01/14/《百年孤独》/">《百年孤独》</a>
    </h2>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2019/01/14/《百年孤独》/" class="article-date">
  <time datetime="2019-01-14T15:29:13.000Z" itemprop="datePublished">01-14-2019</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/读书/">读书</a>
  </div>

      </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      
	    

	  
      
        <p>人生百年，百年孤独。</p>
<p>第一次听到这个书名，还是初中的时候，这么多年，一直觉得这是个令人敬而远之的名字。</p>
<p>花了三周的时间读完了这本书。书中那些长、拗口还夹杂循环的人名以及人物之间错综复杂的关系，严重影响阅读，最后从网上找了任务关系图，读起来轻松不少。</p>
<p>字里行间充满着孤独，每个人都奋力挣扎一生，却从未逃出孤独。</p>
<p>小城从荒芜走向繁荣，然后逐渐走向衰落。布恩迪亚家族七代人，从出生到死亡不过是剧本中的一场演出，在孤独中出场，最后在孤独中落幕，被飓风抹去，从世人记忆中根除，自永远至永远不会被重复。</p>
<p>“过去都是假的，回忆是一条没有归途的路，以往的一切春天都无法复原，即使最狂乱且坚韧的爱情，归根结底也不过是一种瞬息即逝的现实，唯有孤独永恒。”</p>
<p>“你那么憎恨军人，跟他们斗了那么久，琢磨了他们那么久，最终却变得和他们一样。人世间没有任何理想值得以这样的沉沦最为代价。”</p>
<p>“世界不过是身外之物，她的内心不再为任何苦痛而波动。她深深遗憾没能在多年前获得这样的领悟，那时还来得及净化记忆，在崭新的光芒下重建世界，平静地唤回傍晚时皮特罗•克雷斯皮身上的薰衣草味道，并将丽贝卡救出悲惨的境地，而这不是出于爱，也不是出于恨，而是出于对孤独的深切理解。”</p>
<p>“岁月流逝，她却永远停留在天真烂漫的童年，对各样人情世故越发排斥，对一切恶意与猜疑越发无动于衷，幸福的生活在自己单纯的现实世界里。”</p>
<p>“她意识到奥雷里亚诺·布恩迪亚上校并非像她想的那样，由于战争的摧残而丧失对家人的情感，实际上他从未爱过任何人，包括妻子蕾梅黛斯和一夜风流后随即从他生命里消失的无数女人，更不必提他的儿子们。她猜到他并非像所有人想的那样为着某种理想发动那些战争，也并非像所有人想的那样因为疲倦而放弃了近在眼前的胜利，实际上他成功和失败都因为同一个原因，即纯粹、罪恶的自大。她最终得出结论，自己不惜为他付出生命的这个儿子，不过是个无力去爱的人。”</p>
<p>“那个漫无尽头的夜里，赫里内勒多•马尔克斯上校追忆在阿玛兰妲缝纫间里度过的那一去不复返的午后时光，奥雷里亚诺•布恩迪亚上校则苦苦挣扎了数小时，试图抓裂自己孤独的硬壳。自从那个遥远的午后父亲带他去见识冰块，他唯一的快乐时光就是在金银器作坊里打造小金鱼的时刻。他被迫发动三十二场战争，打破与死亡之间的所有协定，并像猪一样在荣誉的猪圈里打滚，最后耽搁了将近四十年才发现纯真的可贵。”</p>
<p>“在生命的最后两个小时里，他无法理解为什么自童年时代起一直折磨他的恐惧感消失了。他无动于衷地听着冗长的指控，甚至没想去展现自己刚刚获得的勇气。其实他在意的不是死亡，而是生命，因此听到死刑判决时他心中没有恐惧只有留恋。”</p>
<p>可能鸡汤文说的对，孤独才是人生的本质。</p>
<p>信息社会，人人都能随时随地冲浪上网的时代，这种孤独的感觉来得更加容易。我看到身边的人无时无刻在看着手机屏幕，在回复着各种社交软件的消息，看着不计其数的自媒体的图文信息。我没有体验到其中的乐趣，我从很久以前，就努力做一个和快文化保持距离的人。几乎不网络聊天，几乎不玩游戏。也正因为如此，我经常感到和周围的人格格不入，在学校的时候，周围的同学上学放学路上无时无刻不在聊游戏，久而久之，我便习惯一个人上课下课。</p>
<p>曾经有过一段孤独感很强烈的时期。总是会在一些细枝末节的事物影响下产生强烈的孤独，我甚至常常在过马路的时候想，假如此时此刻我发生车祸，我该向谁求助。仔细想来，大概是工作以后，潜意识里多了一种梦想破灭不得不向现实屈服的失落，自己却未曾察觉；毕业之后，便是独自一人生活，几乎断了所有与周围事物的联系，不曾与人搭话，甚至曾经一个月未曾出门，哪怕是下楼去趟超市。庆幸的是，这种感觉持续了一段时间便消失了，可能是习惯了现在的生活状态。</p>
<p>努力地去摆脱孤独。看一部纪录片、单曲循环一首歌、坐一小时公交去机场和车站看看繁忙的世界，坐48小时的绿皮车去接触更底层的劳苦大众…渐渐的在孤独中忘记孤独，当你去回想昨天，发现不是一片空白的时候，你已经战胜了孤独。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.youyou-2608.com/2019/01/14/《百年孤独》/" data-id="ck2sphcxc001fcs4nuavh48hs"
         class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/读书/">读书</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        

<article id="post-Web项目可视化开发工具——WebPerformer" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/01/08/Web项目可视化开发工具——WebPerformer/">Web项目可视化开发工具——WebPerformer</a>
    </h2>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2019/01/08/Web项目可视化开发工具——WebPerformer/" class="article-date">
  <time datetime="2019-01-08T14:29:31.000Z" itemprop="datePublished">01-08-2019</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
  </div>

      </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      
	    

	  
      
        <blockquote>
<p>一个基于Web的现金流管理系统是我进入公司接触的第一个项目。两个半月做测试，两个半月做开发，将近半年，现在开发接近尾声，想好好分析一下这个“新兴工具”。</p>
</blockquote>
<h3 id="什么是WebPerformer"><a href="#什么是WebPerformer" class="headerlink" title="什么是WebPerformer"></a>什么是WebPerformer</h3><p>在Google里搜索“Web Performer”（下文简称“wp”），能搜索到结果173,000,000个结果，可以看到，靠前的结果都是日文的，并且都是版本更新相关的结果。在百度中搜索同样的内容，没有发现有中文结果，在国内应用几乎为0。</p>
<p><img src="https://image.youyou-2608.com/blog/wp-search-result.png" alt="wp-google-search-result"></p>
<p>wp是“キヤノンITソリューションズ株式会社”的产品，产品简介：<a href="https://www.canon-its.co.jp/news/detail/20180508webperformer.html" target="_blank" rel="noopener">wp-官网简介</a> 。</p>
<p><img src="https://image.youyou-2608.com/blog/wp-simple-info.png" alt="wp-simple-info"></p>
<p>简单来说，wp是为了降低人力成本、应对信息技术发展和技术人才不足、提高软件质量而开发的高效率自动化开发工具。</p>
<p>目前已经在制药、贸易、建设、运输、金融保险等行业有一些成功应用的案例。</p>
<p><strong>wp就是一个功能比较全的Eclipse插件。</strong></p>
<h3 id="与传统Web项目开发的相同点与不同点"><a href="#与传统Web项目开发的相同点与不同点" class="headerlink" title="与传统Web项目开发的相同点与不同点"></a>与传统Web项目开发的相同点与不同点</h3><p>官网的简介几乎都是一笔带过，并且没有提到细节。应该是只有购买之后才会得到官方详细的使用文档。</p>
<h4 id="Web-Performer相关的概念"><a href="#Web-Performer相关的概念" class="headerlink" title="Web Performer相关的概念"></a>Web Performer相关的概念</h4><ul>
<li>work code：变量在一个模块（模块包括IO，BP，DM，EXT）的唯一名称，含义和命名规则与Java中的变量相似。</li>
<li>IO：输入输出的意思，在wp中一个IO对应一个页面，页面上所有的项目（数据项，label）都来自在IO中定义的项目，在IO中可以给各个项目添加一些属性，这些属性包括work code（变量名），name（变量别命），长度（区别于byte，例如“name”是4位，“你好”是2位），小数位（项目为数字时且需要小数位时指定，默认-1），数据类型（见“数据类型”部分）。</li>
<li>DM：Data Model的简称，主要功能是作为存放数据的容器。类似于Java中pojo类，兼有泛型集合的功能。</li>
<li>BP：Business Process的简称，BP是一个功能的逻辑部分，大致的使用过程为：向BP传入参数 &gt; BP中加工处理 &gt; 将结果集放入DM  &gt; 结果集传到IO &gt; 画面显示数据。</li>
<li>EXT：Extentsion，扩展。某些在BP中不能完成的功能，或者逻辑过于复杂超出了wp的功能范围，可以自己编写相应的Java类或者JavaScript文件，然后通过BP调用EXT，EXT调用自定义处理的方式处理数据。</li>
</ul>
<h4 id="与传统开发的联系"><a href="#与传统开发的联系" class="headerlink" title="与传统开发的联系"></a>与传统开发的联系</h4><ul>
<li>从wp模块分类中很容易看出，其实wp的本质还是MVC的思想，IO对应View，BP对应Controller，DM对应Model。</li>
<li><strong>在基于wp的开发中，除了扩展部分和自定义页面布局及样式之外，其他所有的操作都接触不到代码，开发的内容仅仅是在各个模块中添加一个个项目，然后给对应的项目指定相应的属性。</strong></li>
</ul>
<h3 id="开发环境（环境依赖）"><a href="#开发环境（环境依赖）" class="headerlink" title="开发环境（环境依赖）"></a>开发环境（环境依赖）</h3><p>在开发开始之前，需要搭建开发环境，总体来说wp的开发环境和正常开发时的环境几乎一致。</p>
<p>在wp中，由于wp本质上就是一个Eclipse插件，所以Eclipse是必须的，<del>项目管理基于Maven</del>，构建基于Ant，服务器为Tomcat，自动生成的则是Java代码，所以需要Java环境，其他的与使用Eclipse正常开发几乎一致。常用的功能仅仅是编译时完成一个功能之后点击编译（Eclipse的编译）、需要自定义页面布局时使用Ant命令生成对应IO的layout.html文件然后基于layout.html文件修改页面布局。</p>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>wp中有自己的数据类型，这些数据类型应该是为了降低编程门槛而从Java数据类型中提炼出来的。</p>
<p>数据的类型：</p>
<ul>
<li>CODE：介于Java的String和Numeric之间，定义只包含数字和字母的数据，例如：123，AC01。</li>
<li>TEXT：类似于Java中的String类型，几乎任何类型都可以转换成TEXT类型，例如：’Hello world’。</li>
<li>DATE：日期类型，有多种格式且可以互相转换，例如：20190108，2019-01-08。</li>
<li>TIME：时间类型，有多种精度可以选择，最大精度到秒，例如：2019-01-08 21:59:01。</li>
<li>NUM：数字类型，有多种格式且可以互相转换，例如1234，1,234。</li>
<li>FILE：文件类型。</li>
<li>BOOL：布尔类型，不常用。</li>
<li>CURRENCY：货币类型。</li>
</ul>
<p>work code的类型：</p>
<ul>
<li>IO：输入输出类型，类似于html中的input类型，页面刷新后输入的值恢复成IO模块中设置的默认值。</li>
<li>I：输入类型，与IO类型类似，页面刷新后输入的值保持不变。</li>
<li>O：输出类型，类似于IO类型的只读模式。</li>
<li>A：Action的简称，执行一个动作，可以调用BP逻辑以执行操作，例如”检索“，”修正“，”删除“。</li>
<li>G：Group的简称，一个组，类似于一个没有边框的table，可以用来展示检索出的数据，在其后并且下一个G类型项目之前的所有IO属性”Level“值为”2“的项目会被组织到这个table中作为表头（一般项目的Level值为1），值会被添加到这个label下，形成完成的数据表格。</li>
</ul>
<p>BP中项目的常用类型：</p>
<ul>
<li>ARG：参数类型，表示该值是IO中传过来的变量。</li>
<li>CALL：表示调用一个DM并执行DM中的一个操作，例如SELECT，UPDATE。</li>
<li>PROCEDURE：表示调用一个存储过程。</li>
<li>FOREACH：对一个集合执行for循环，类似于Java中的增强for循环。</li>
<li>BREAK：跳出当前循环。</li>
<li>CONTINUE：跳过本次循环进入下一次循环。</li>
<li>DO/WHILE：类似于Java中的WHILE。</li>
<li>IF/ELSEIF/ELSE：判断语句。</li>
<li>END：表示一个逻辑块的结束。</li>
<li>LOG：日志记录。</li>
<li>WORKAREA：表示调用一个数据集合。</li>
</ul>
<p>DM中操作的类型：</p>
<ul>
<li>SELECT：表示按照指定的条件执行select语句。</li>
<li>UPDATE：表示按照指定的条件执行update语句。</li>
<li>DELETE：表示按照指定的条件执行delete语句（符合条件的记录不存在时报错）。</li>
<li>ERASE：表示按照指定的条件执行delete语句（符合条件的记录不存在时不报错）。</li>
<li>INSERT：表示按照指定的条件执行insert语句。</li>
</ul>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><h4 id="DM的定义"><a href="#DM的定义" class="headerlink" title="DM的定义"></a>DM的定义</h4><p>DM主要定义一些与数据库或者页面需要的字段，如下表：</p>
<table>
<thead>
<tr>
<th>项目CODE</th>
<th>项目别名</th>
<th>位数</th>
<th>小数位</th>
<th>字段操作</th>
<th>页面跳转</th>
<th>来自DM</th>
<th>DM字段</th>
</tr>
</thead>
<tbody><tr>
<td>TRAN_ID</td>
<td>交易编号</td>
<td>13</td>
<td>-1</td>
<td></td>
<td></td>
<td></td>
<td>CODE</td>
</tr>
<tr>
<td>TRAN_DATE</td>
<td>交易日期</td>
<td>8</td>
<td>-1</td>
<td></td>
<td></td>
<td></td>
<td>CODE</td>
</tr>
<tr>
<td>TRAN_VOLUME</td>
<td>交易额</td>
<td>15</td>
<td>0</td>
<td></td>
<td></td>
<td></td>
<td>NUM</td>
</tr>
</tbody></table>
<p>在DM的属性中可以指定SQL语句，也可以在操作中指定数据库操作类型及条件：</p>
<table>
<thead>
<tr>
<th>项目CODE</th>
<th>项目别名</th>
<th>项目类型</th>
<th>条件</th>
</tr>
</thead>
<tbody><tr>
<td>SELECT_DATA</td>
<td>数据查询</td>
<td>SELECT</td>
<td>TRAN_DATE&gt;FORMATDATE(@1,1) AND CUSTOMER_CODE =   TEXT(‘TEST_CODE’) AND TRAN_VOLUME &gt; NUM(@2)</td>
</tr>
</tbody></table>
<p>其中@1表示调用时的第一个参数，@2表示第二个参数，依此类推，但是必须保证传递过来的参数与定义时的参数顺序一致，否则会得到期待值以外的结果；另外还需要保证SQL返回的结果与DM中字段数量、字段名和顺序一致，否则无法通过编译。</p>
<p>如果要给一个DM的对象赋值，需要在DM中定义赋值方法，分别指定字段以及对应的参数。</p>
<h4 id="BP的定义"><a href="#BP的定义" class="headerlink" title="BP的定义"></a>BP的定义</h4><p>BP是一个功能模块的逻辑部分，一个简单的示例定义如下：</p>
<table>
<thead>
<tr>
<th>项目类型</th>
<th>对应DM</th>
<th>调用操作</th>
<th>数据类型</th>
<th>参数</th>
<th>WORK CODE</th>
</tr>
</thead>
<tbody><tr>
<td>ARG</td>
<td></td>
<td></td>
<td>CODE</td>
<td></td>
<td>TRAN_DATE</td>
</tr>
<tr>
<td>ARG</td>
<td></td>
<td></td>
<td>TEXT</td>
<td></td>
<td>CUSTOMER_ID</td>
</tr>
<tr>
<td>ARG</td>
<td></td>
<td></td>
<td>NUM</td>
<td></td>
<td>TRAN_VOLUME</td>
</tr>
<tr>
<td>CALL</td>
<td>TRAN_INFO</td>
<td>SELECT_DATA</td>
<td></td>
<td>_ARG_.TRAN_DATE,_ARG_.CUSTOMER_ID,_ARG_.TRAN_VOLUME</td>
<td>TRAN_INFO</td>
</tr>
<tr>
<td>CALL</td>
<td>PAGE_DATA</td>
<td>SET_DATA</td>
<td></td>
<td>TRAN_INFO</td>
<td>PAGE_TRAN_INFO</td>
</tr>
<tr>
<td>WORKAREA</td>
<td>PAGE_DATA</td>
<td></td>
<td></td>
<td>APPEND,PAGE_TRAN_INFO</td>
<td></td>
</tr>
</tbody></table>
<p>这时只要在IO中指定数据来源类型为WORKAREA并且为PAGE_DATA，这个数据集合中的数据便能在页面展示出来。</p>
<h4 id="IO的定义"><a href="#IO的定义" class="headerlink" title="IO的定义"></a>IO的定义</h4><p>IO主要存放与页面交互的数据或者接收用户的输入，可以设定初期值：</p>
<table>
<thead>
<tr>
<th>项目类型</th>
<th>项目CODE</th>
<th>项目别名</th>
<th>位数</th>
<th>小数位</th>
<th>加工式</th>
<th>目标页面</th>
<th>来自DM</th>
<th>DM字段</th>
</tr>
</thead>
<tbody><tr>
<td>IO</td>
<td>USER_NAME</td>
<td>用户名输入框</td>
<td>20</td>
<td>-1</td>
<td></td>
<td></td>
<td></td>
<td>@TEXT</td>
</tr>
<tr>
<td>O</td>
<td>TRAN_ID</td>
<td>交易ID</td>
<td>15</td>
<td>-1</td>
<td></td>
<td></td>
<td>PAGE_DATA</td>
<td>TRAN_ID</td>
</tr>
<tr>
<td>O</td>
<td>TRAN_DATE</td>
<td>交易日期</td>
<td>10</td>
<td>-1</td>
<td></td>
<td></td>
<td>PAGE_DATA</td>
<td>TRAN_DATE</td>
</tr>
<tr>
<td>O</td>
<td>TRAN_VOLUME</td>
<td>交易额</td>
<td>15</td>
<td>0</td>
<td></td>
<td></td>
<td>PAGE_DATA</td>
<td>TRAN_VOLUME</td>
</tr>
</tbody></table>
<h4 id="更多细节"><a href="#更多细节" class="headerlink" title="更多细节"></a>更多细节</h4><p>程序运行中，数据流向为：IO &gt; BP &gt; DM &gt; BP &gt; IO，不过这个顺序不严格界定，也可以从IO项目的初期值属性中直接访问数据库取得数据，多用于取全局变量等类型的值。</p>
<h3 id="常用内置方法"><a href="#常用内置方法" class="headerlink" title="常用内置方法"></a>常用内置方法</h3><ul>
<li>CODE() / TEXT() / NUM() / DATE() / TIME()：基本数据类型之间的互相转换。（某些数据类型之间不能互转，转换失败会导致编译失败）。</li>
<li>FORMATDATE(DATE,STYLE)：日期格式转换，1：yyyy-MM-dd；3：yyyyMMdd等。</li>
<li>ADDDATE(DATE,Y,M,D)：日期DATE上加Y年M月D日后的日期，若Y/M/D为负时则执行减操作。</li>
<li>SUBSTITUTE(TEXT,TEXT1,TEXT2)：将TEXT中的TEXT1全部置换为TEXT2。</li>
</ul>
<h3 id="一般开发流程（一个增-删-改-查的例子）"><a href="#一般开发流程（一个增-删-改-查的例子）" class="headerlink" title="一般开发流程（一个增/删/改/查的例子）"></a><del>一般开发流程（一个增/删/改/查的例子）</del></h3><p>原本打算遵循一般使用流程完成一个增/删/改/查的例子，但是考虑到版权问题，此处略过。大致的使用和上文描述并无太大差距。</p>
<h3 id="页面风格与页面布局"><a href="#页面风格与页面布局" class="headerlink" title="页面风格与页面布局"></a>页面风格与页面布局</h3><h4 id="默认页面布局与页面风格"><a href="#默认页面布局与页面风格" class="headerlink" title="默认页面布局与页面风格"></a>默认页面布局与页面风格</h4><p>在软件中，内置了几种风格，对于一般对于页面美观程度要求不高的公司内部项目来说已经足够，其实这也差不多就是这个工具软件的使用范围，规模更大或者要求较多的面向用户的项目来说，这个工具显得力不从心。</p>
<h4 id="自定义页面布局与元素样式"><a href="#自定义页面布局与元素样式" class="headerlink" title="自定义页面布局与元素样式"></a>自定义页面布局与元素样式</h4><p>每定义一个项目，wp会默认纵向排列，可以在项目属性中指定排列方向为X方向。当默认Layout满足不了需求时，就需要自己改变默认布局，在项目编译完成后，使用Ant生成默认的布局文件，然后对默认布局文件layout.html进行修改，直至满足需求。</p>
<p>其实默认Layout就是一个整的table，每一个项目都定义在td单元格中，因此本质上就是改动一个table。</p>
<h3 id="浅谈使用WebPerformer的利与弊"><a href="#浅谈使用WebPerformer的利与弊" class="headerlink" title="浅谈使用WebPerformer的利与弊"></a>浅谈使用WebPerformer的利与弊</h3><p>基于两个月的使用感受，总结出下面几点：</p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ol>
<li>提高开发效率：对于简单的页面（例如检索数据然后展示），可以免去编写页面的工作，可以快速实现功能，开发效率确实能提升不少。但是这仅仅限于极少数极为简单的页面。</li>
<li>降低开发门槛：wp能极大的降低开发门槛，这是我觉得最大的优点。开发者不用去了解泛型和反射的细节、不用去了解多线程、更不需要了解设计模式的知识，全程“傻瓜式”编程，只要你会使用鼠标和触摸板、知道怎么写一个SQL语句，然后剩下的问题都是wp工具使用的问题。</li>
<li>减小开发难度：因为所有项目的属性已经被工具限定范围，开发者能进行的操作早已被工具限制，所以开发中遇到的关于语言使用本身最严重的错误就是NPE，大大减少了编程错误。</li>
</ol>
<h4 id="弊端"><a href="#弊端" class="headerlink" title="弊端"></a>弊端</h4><ol>
<li>丧失灵活性是为使用简单付出的代价。到目前为止，使用了wp将近两个月的时间，最大的感觉就是 <strong>限制太多</strong> 。比如一个页面的数据只能来自一个DM，BP内做循环等，流程繁琐。</li>
<li>代码可读性几乎为0。由于同一模块中不能有相同变量名和逻辑段缩进不灵活的原因，导致BP部分的代码可读性几乎为零。后期维护将会是一个艰巨的任务。</li>
<li>代码复用率低。由于工具本身的特征，很难写出通用功能，整个项目中，每个人几乎都是各自为战，花了太多时间去重复造轮子。</li>
<li>可能存在许多性能问题。由于工具本身限制丧失了许多灵活性，很多明明两行代码就能做到的事情，在wp中却不得不另寻出路，拐弯抹角才能达到目的，由此导致许多性能上的损失。</li>
</ol>
<h4 id="个人使用感受"><a href="#个人使用感受" class="headerlink" title="个人使用感受"></a>个人使用感受</h4><p>因为前期没有培训，完全是自己研究文档、在开发中自己摸索，所以整个过程用得很是憋屈。</p>
<p>现阶段离可视化自动化还过于遥远，反正我以后再也不想接触这个工具了，我无法忍受各种限制以及为了向这些限制而在代码性能以及代码可读性等方面做出的让步。</p>
<p>在官网的介绍上赫然挂着“超高速开发”几个字，但是较为讽刺的是，目前这个为期半年的项目已经延期一个多月。</p>
<h3 id="发展前景"><a href="#发展前景" class="headerlink" title="发展前景"></a>发展前景</h3><p>工具总是朝着简单易用和自动化的方向发展。wp应该算是在这个方向上走得比较远的工具，尽管现在还有许多功能满足不了需求，但是随着不断更新，很多问题应该会逐渐解决。包括在使用范围上应该也会逐渐扩大。但是对于一些规模较大以及性能要求高的系统来说，wp还有很长很长的路要走。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.youyou-2608.com/2019/01/08/Web项目可视化开发工具——WebPerformer/" data-id="ck2sphczc006ucs4nxt4orsmq"
         class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web开发/">Web开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习笔记/">学习笔记</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        

<article id="post-为什么要学摄影" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/01/05/为什么要学摄影/">为什么要学摄影</a>
    </h2>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2019/01/05/为什么要学摄影/" class="article-date">
  <time datetime="2019-01-05T12:48:19.000Z" itemprop="datePublished">01-05-2019</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/摄影/">摄影</a>
  </div>

      </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      
	    

	  
      
        <p>为什么要学摄影？</p>
<p><strong>原文由 <a href="https://www.jianshu.com/u/b3720ee3e557" target="_blank" rel="noopener">刘星文</a> 发布于简书 <a href="https://www.jianshu.com/p/97ea1964027a" target="_blank" rel="noopener">为什么要学摄影</a> ，未经作者本人授权，禁止转载。</strong></p>
<p>2017.12.07 12:45* 字数 1755</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-eee1313471772e8c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>转眼，已是冬天。</p>
<p>好像刚刚在春天的繁花下打了个盹，醒来却已是年尾。</p>
<p>而回望过去，照片成了最好的载体，每一张都记录着当时的风，空气的温度，阳光照在身上的温暖……</p>
<p>好像，那一刻又被激活了。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-5267b65a3a75da9b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>西湖</p>
<p>所有图片均使用 iPhone 5 或 iPad Pro 拍摄</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-9b0c2be9fc766f9e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>过完春节那段日子，天气出奇地好，阳光和煦，一切都充满无限的生机。</p>
<p>每一刻，我都想待在室外。</p>
<p>拍这张照片的时候，天空无比清澈通透，傍晚的夕阳洒在江面上，美的像梦境。</p>
<p>我用慢快门拍摄了水面，让它像镜子一样光滑。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-ec210e5e546e9115.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>那天很冷，风大雨大。</p>
<p>一个人去了浴鹄湾，里面空空荡荡，很少看到人。</p>
<p>虽然冻的手不听使唤，却庆幸捕捉到这样的景色。</p>
<p>这张照片是在一个小桥上拍到的，一棵树花开得正盛，特别惹眼。</p>
<p>有时候风雨越大，景色越美。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-8fbc4eb2f6048894.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>那天，去了九溪。</p>
<p>美好的春日，一路上都是郊游的人。</p>
<p>阳光很暖，我走了很远，在亭子边休息时下了这张照片。</p>
<p>后来很多人问这是不是林芝？</p>
<p>其实那棵树并未开花，但由于光线的神奇缘故，却呈现出了奇妙的颜色。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-bdb9a70a75d40333.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>骑行时偶遇的一个村庄。</p>
<p>庄子的对面是富春江上的一个小岛。</p>
<p>岸边开满了油菜花，水平如镜，真的是如诗如画，都舍不得闭眼。</p>
<p>我在码头边睡了一个小时。</p>
<p>后来又去了几趟，再也没碰到过第一次看到的美景。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-bf2e91d4be9e6a01.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>梅花开得盛的时候，去了植物园。</p>
<p>早早便入园，赏梅的，遛鸟的，非常热闹。</p>
<p>各种颜色的梅花争芳斗艳，很是壮观。</p>
<p>在植物园逗留了半天，边想心事边拍照，出来的时候，感觉心事少了很多。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-0855f6a6fe6e8fe9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>这其实是西溪的一朵梅花，用微距拍摄了花蕊。</p>
<p>那天很冷，出门的时候本想多穿件毛衣，犹豫了下，又放下了，结果到了西溪，手都冻僵了。</p>
<p>这其实是我第一次去西溪里面，确实很美。</p>
<p>坐了游船，虽说下着雨，但还是打开窗户，不停地拍沿途的风景。</p>
<p>后来找到了一个很安静的小亭子，在那里拍到了一个极美的镜头，梅花倒映在水面，瞬间就理解了什么叫“疏影横斜水清浅”。</p>
<p>在亭子里待了很久，不停地从各种角度拍梅花，由于亭子上的小台阶太滑了，结果摔了一跤，疼的我直咧嘴。</p>
<p>出园的时候，看到了远山冒着氤氲的水气，美得不忍离开。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-ca7d57daf418a8f3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>那天傍晚的西湖，落日极美。</p>
<p>天空有很厚的云层，阳光穿过，炫目且有些刺眼。</p>
<p>头有些晕，晃晃悠悠中看到了这颗树，落日的余晖中，枝干显得特别有力。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-5cc0ecd6a07cfdac.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>这天的风很大，感觉人都被吹得飘起来了，看看柳条就知道。</p>
<p>这时候柳芽还很小，现在一晃都绿树成荫了。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-aa93fae48136eef1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>很冷的一天。</p>
<p>还未完全抽芽的草地还是一片嫩黄，被包裹在在群山与水面之间。</p>
<p>有时候，越是恶劣的天气，越有难得的风景。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-bb6be1f57cabcc81.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>元宵节。</p>
<p>街上还很冷清，江边公园里行人也不多。</p>
<p>用了 Slow Shutter 慢快门相机，效果很好。</p>
<p>依然很冷，月亮很圆，当然，手机不可能拍到这么大的月亮，这是我在手机上用 APP 加上去的。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-8873a33f5993d7a2.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>戴家山，久闻其名，终见真容。</p>
<p>雨时大时小，山路真的是非常曲折，但风景奇美，随处可见可见大大小小的油菜花田。</p>
<p>在山上走了好久，有时候水气弥漫真个山谷，如仙境一般。</p>
<p>去看了山里的书店，很别致。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-ffa3f6b7bceba6b4.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>那天傍晚的时候，去了江边。</p>
<p>很多植物已经郁郁葱葱，叶片在阳光下泛着金色。</p>
<p>逆光的时候，树叶更美。</p>
<p>于是逆光拍摄了一片树叶。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-6552c4e8cfab43aa.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>风大雨大的一天。</p>
<p>远山层层叠叠，用慢快门相机稍微抖动着拍了一张模糊的照片，在 VSCO 里稍微调色之后，就得到了一张诗意盎然的作品。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-35a267c4c695e601.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>被雨打落在地的一朵花。</p>
<p>轻轻地放在一张随身携带的卡纸上。</p>
<p>调成黑白，出奇地有质感。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-0c67a4a720a3506d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>有天，很早去了一家书店。</p>
<p>很安静，有几个人在安静地看书。</p>
<p>阳光透过巨大的落地窗洒进来，很是惬意。</p>
<p>一个城市，如果有几个 24 小时书店，是件很幸福的事情。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-ef82b9742e86682c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>特别喜欢这巨大的玻璃，无比通透。</p>
<p>桌椅很舒服，光线正好，越来越喜欢呆在这里。</p>
<p>环境，真的是非常非常重要。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-9b94e52d68c51355.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>沿江骑行时，在一个村庄看到这辆这行车，早上的阳光照过来，光影极美。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-a37bf81e2e36e711.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>芦茨。</p>
<p>水特别清，小鱼特别多。</p>
<p>慢快门拍了流水，呈现出一片如诗的静谧。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-696ccb8a39be6074.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>欲把西湖比西子，淡妆浓抹总相宜。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-9d133e32c5c96f63.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>远山层层叠叠，而那只风筝，在高空中遥望着群山。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-9dbcc4a20829f914.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>江上起雾时，这座小城便犹如仙境一般。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/742794-27e70443526c901c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="img"></p>
<p>桐君山上的一处老建筑。</p>
<p>下午的光影，极美。</p>
<p>这一张张的照片，就像一个个独立的时空，存储着那一刻的记忆。</p>
<p>如果记忆就是人生的全部，那摄影，就是通向记忆的桥梁。</p>
<p>这也许就是摄影的意义，从短暂的每一刻，瞥见人生的全貌。</p>
<p><strong>如何用手机拍出电影感的画面？</strong></p>
<hr>
<p><a href="https://www.jianshu.com/p/01dd0bb770a0" target="_blank" rel="noopener"><strong>如何彻底摆脱低效，成就高效人生？</strong></a></p>
<p><a href="https://www.jianshu.com/p/54da13f7c2a8" target="_blank" rel="noopener">如何用黄油相机轻松做美图？</a></p>
<p><a href="https://www.jianshu.com/p/afc8ddec73cf" target="_blank" rel="noopener">手机都没玩好 ，还想拍出好照片？</a></p>
<p><a href="https://www.jianshu.com/p/59c37dfb5e6b" target="_blank" rel="noopener">这些 APP，让你的照片美到飞起来</a></p>
<p><a href="https://www.jianshu.com/p/697450fafd71" target="_blank" rel="noopener">必看，20部摄影超美的电影</a></p>
<p><a href="https://www.jianshu.com/p/4408ae63674d" target="_blank" rel="noopener">最不起眼的习惯，就这样拉开你和别人的距离！</a></p>
<p>© 著作权归原作者所有</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.youyou-2608.com/2019/01/05/为什么要学摄影/" data-id="ck2sphczd006xcs4nrwtmexlf"
         class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/摄影/">摄影</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        

<article id="post-LeetCode之3Sum" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/01/03/LeetCode之3Sum/">LeetCode之3Sum</a>
    </h2>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2019/01/03/LeetCode之3Sum/" class="article-date">
  <time datetime="2019-01-03T13:55:22.000Z" itemprop="datePublished">01-03-2019</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/LeetCode/">LeetCode</a>
  </div>

      </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      
	    

	  
      
        <p><img src="https://image.youyou-2608.com/blog/IMG_4722.JPG" alt="轻音乐推荐"></p>
<p>不知道身边现在还有没有用QQ音乐的人。</p>
<h2 id="题目内容"><a href="#题目内容" class="headerlink" title="题目内容"></a>题目内容</h2><p>输入一个数组，例如{-1 0 1 2 -1 -4}，从数组中找三个数（a,b,c），使得其和0，输出所有的（a,b,c）组合。</p>
<p>要求abc不能重复，并且a&lt;=b&lt;=c。</p>
<p>例：</p>
<p>S = {-1, 0, 1, 2, -1, -4}；</p>
<p>输出：</p>
<p>(-1, 0 ,1)</p>
<p>(-1, -1, 2)</p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>一看到题目，不问代码行数，不问时间复杂度，便排出三个循环。。但是循环非常耗时，显然不是题目的本意。想了好长时间没有什么进展。</p>
<p>先将给定数组排序，然后指定一个数，在数组中找出两个数并且这两个数的和是目标数值的相反数：<a href="http://www.cnblogs.com/xcr1234/p/5285727.html" target="_blank" rel="noopener">【LeetCode】3Sum 解题报告</a></p>
<p>在网上找到了篇比较有新意的文章：[<a href="https://www.cnblogs.com/xcr1234/p/5285727.html" target="_blank" rel="noopener">3Sum algorithm - 非常容易理解的实现 （java)</a>] 。</p>
<hr>
<p>最后发现维基百科中就有收录：<a href="https://zh.wikipedia.org/zh-hans/3SUM" target="_blank" rel="noopener">维基百科—3SUM</a> ，还有更一般的情形 N SUM。</p>
<figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sort(S);</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">0</span> <span class="keyword">to</span> n-<span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">   a = S[i];</span><br><span class="line">   start = i+<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">end</span> = n-<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">while</span> (start &lt; <span class="keyword">end</span>) <span class="keyword">do</span></span><br><span class="line">      b = S[start]</span><br><span class="line">      c = S[<span class="keyword">end</span>];</span><br><span class="line">      <span class="keyword">if</span> (a+b+c == <span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">         output a, b, c;</span><br><span class="line">         <span class="comment">// Continue search for all triplet combinations summing to zero.</span></span><br><span class="line">          <span class="keyword">end</span> = <span class="keyword">end</span> - <span class="number">1</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (a+b+c &gt; <span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">         <span class="keyword">end</span> = <span class="keyword">end</span> - <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">         start = start + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>伪代码还挺容易理解的。</p>
<h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><p>因为知乎上有人宣称证明了哥德巴赫猜想的原因，这两天还特意了解了下猜想证明的历史，“1+2”、“1+3”之类的证明，虽然一点也没看懂。感觉数学真的很有魅力，严谨清晰的逻辑，精妙完美的结论，自然界中的一切每时每刻都在遵循着其中的规律运行，更加感慨于人类的智慧，都找不到合适的赞美的词了。</p>
<p>“超越数”、“黄金分割”、“哥德巴赫猜想”、“黎曼猜想”…</p>
<p>停下思绪，回到现实：<strong>当你理解它的时候你觉得进入了天堂，当你不理解它的时候你仿佛进入了地狱</strong>，看哭了…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.youyou-2608.com/2019/01/03/LeetCode之3Sum/" data-id="ck2sphcwt000ccs4nl31wzyz7"
         class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LeetCode/">LeetCode</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        

<article id="post-SpringBoot基础学习笔记" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/01/01/SpringBoot基础学习笔记/">SpringBoot基础学习笔记</a>
    </h2>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2019/01/01/SpringBoot基础学习笔记/" class="article-date">
  <time datetime="2019-01-01T08:29:35.000Z" itemprop="datePublished">01-01-2019</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
  </div>

      </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      
	    

	  
      
        <h2 id="内容概要"><a href="#内容概要" class="headerlink" title="内容概要"></a>内容概要</h2><ol>
<li>SpringBoot入门</li>
<li>SpringBoot配置</li>
<li>SpringBoot与日志</li>
<li>SpringBoot与Web开发</li>
<li>SpringBoot与Docker</li>
<li>SpringBoot与数据访问</li>
<li>SpringBoot启动配置原理</li>
<li>SpringBoot自定义Starters</li>
<li>SpringBoot与缓存</li>
<li>SpringBoot与消息</li>
<li>SpringBoot与检索</li>
<li>SpringBoot与任务</li>
<li>SpringBoot与安全</li>
<li>SpringBoot与分布式</li>
<li>SpringBoot与开发热部署</li>
<li>SpringBoot与监控管理</li>
</ol>
<h2 id="第一章-SpringBoot入门"><a href="#第一章-SpringBoot入门" class="headerlink" title="第一章 SpringBoot入门"></a>第一章 SpringBoot入门</h2><h3 id="1-1-SpringBoot简介"><a href="#1-1-SpringBoot简介" class="headerlink" title="1.1 SpringBoot简介"></a>1.1 SpringBoot简介</h3><p>特点：约定大于配置；去繁从简；</p>
<p>背景： </p>
<p>J2EE笨重的开发；</p>
<p>繁多的配置；</p>
<p>低下的效率；</p>
<p>复杂的部署；</p>
<p>第三方技术集成难度大；</p>
<p>解决方案：</p>
<p>SpringBoot：一站式J2EE的解决方案；</p>
<p>SpringCloud：分布式整体解决方案；</p>
<p>优点：</p>
<p>快速创建可独立运行的Spring项目并与主流框架集成；</p>
<p>starters自动依赖管理及版本控制；</p>
<p>使用嵌入的Servlet容器，应用无需打包；</p>
<p>大量的自动配置，简化开发，也可修改默认值；</p>
<p>无需配置XML，无代码生成，开箱即用；</p>
<p>准生产环境的运行时应用监控；</p>
<p>是对Spring技术栈的一个整合。</p>
<hr>
<h3 id="1-2-微服务"><a href="#1-2-微服务" class="headerlink" title="1.2 微服务"></a>1.2 微服务</h3><p>单体应用： 开发，测试，部署简单；</p>
<p>微服务：功能拆分，灵活配置，通信协作。</p>
<p>SpringBoot官网 &gt; 微服务文档</p>
<hr>
<h3 id="1-3-开发环境配置"><a href="#1-3-开发环境配置" class="headerlink" title="1.3 开发环境配置"></a>1.3 开发环境配置</h3><ol>
<li>JDK版本；</li>
<li>maven版本；</li>
<li>开发工具选择；</li>
<li>框架版本选择；</li>
</ol>
<hr>
<h3 id="1-4-第一个应用：HelloWorld"><a href="#1-4-第一个应用：HelloWorld" class="headerlink" title="1.4 第一个应用：HelloWorld"></a>1.4 第一个应用：HelloWorld</h3><ol>
<li>创建一个Maven项目；</li>
<li>导入SpringBoot相关依赖；</li>
<li>编写主程序，启动SpringBoot应用；</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApp</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MainApp.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>编写业务逻辑，服务；</li>
<li>运行主程序测试；</li>
<li>打包jar包：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行jar包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar xxx.jar</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="1-5-HelloWorld原理探究"><a href="#1-5-HelloWorld原理探究" class="headerlink" title="1.5 HelloWorld原理探究"></a>1.5 HelloWorld原理探究</h3><p>POM文件：</p>
<ol>
<li>父项目：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">父项目：</span><br></pre></td></tr></table></figure>

<p>SpringBoot的<strong>版本仲裁中心</strong>，导入依赖不需要写版本号。</p>
<ol>
<li>导入的依赖：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>spring-boot-starter-web：</p>
<p>场景启动器：帮我们导入web模块正常运行所需的依赖的组件；</p>
<p>将所有的功能场景抽取出来，做成启动器，只需要在项目中导入相关的starter，所有的依赖都会被导入，版本由spring-boot自动管理。</p>
<hr>
<h3 id="1-6-主程序类原理探究"><a href="#1-6-主程序类原理探究" class="headerlink" title="1.6 主程序类原理探究"></a>1.6 主程序类原理探究</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhulongkun20@163.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 18-9-9 下午2:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApp</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MainApp.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@SpringBootApplication标注在某个类上，指定SpringBoot的主配置类，由这个类来启动SpringBoot应用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(</span><br><span class="line">    excludeFilters = &#123;<span class="meta">@Filter</span>(</span><br><span class="line">    type = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;TypeExcludeFilter.class&#125;</span><br><span class="line">), <span class="meta">@Filter</span>(</span><br><span class="line">    type = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;AutoConfigurationExcludeFilter.class&#125;</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>

<p>@SpringBootConfiguration：标注在某个类上，表示该类是SpringBoot的配置类。</p>
<p>@Configuration：配置类上标注该类。配置类也是一个组件：@Component；</p>
<p>@EnableAutoConfiguration：开启自动配置，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">需要配置的东西由SpringBoot自动配置。</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@AutoConfigurationPackage</span><br><span class="line">@Import(&#123;AutoConfigurationImportSelector.class&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@AutoConfigurationPackage：自动配置包，给容器导入一个组件，导入的组件由AutoConfigurationPackage.Registrar；</span><br><span class="line"></span><br><span class="line">将主配置类所在的及以下所有的子包里的所有组件添加到Spring容器中。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import</span>(&#123;Registrar.class&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoConfigurationPackage &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Import：给容器中导入一些组件：AutoConfigurationImportSelector：选择哪些组件导入。</span><br><span class="line"></span><br><span class="line">	给容器中导入自动配置类（xxxAutoConfiguration）：给容器中导入场景需要的所有的组件并配置好这些组件。</span><br></pre></td></tr></table></figure>

<p><img src="https://image.youyou-2608.com/springboot/20180909151509.png" alt="配置类"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> List&lt;String&gt; <span class="title">getCandidateConfigurations</span><span class="params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(<span class="keyword">this</span>.getSpringFactoriesLoaderFactoryClass(), <span class="keyword">this</span>.getBeanClassLoader());</span><br><span class="line">    Assert.notEmpty(configurations, <span class="string">"No auto configuration classes found in META-INF/spring.factories. If you are using a custom packaging, make sure that file is correct."</span>);</span><br><span class="line">    <span class="keyword">return</span> configurations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>SpringBoot启动的时候从类路径下META-INF/spring.factories中获取EnableAutoConfiguration指定的值，将这些值导入到Spring容器中，自动配置类生效。</strong></p>
<p>需要自己指定的配置，已经由配置类自动配置好。</p>
<p>org/springframework/boot/spring-boot-autoconfigure/2.0.4.RELEASE/spring-boot-autoconfigure-2.0.4.RELEASE.jar!/META-INF/spring.factories</p>
<p><img src="https://image.youyou-2608.com/springboot/google-chrome_20180909152808.png" alt="自动配置类"></p>
<hr>
<h3 id="1-7-SpringBoot项目初始化器"><a href="#1-7-SpringBoot项目初始化器" class="headerlink" title="1.7 SpringBoot项目初始化器"></a>1.7 SpringBoot项目初始化器</h3><p>SpringBoot项目向导：</p>
<p><strong>IDEA &gt; New Project &gt; Spring Initializer &gt; 项目详情 &gt; 导入相关场景依赖。</strong></p>
<p>@RestController注解：</p>
<p>@ResponseBody和@RequestMapping注解组合。</p>
<ol>
<li>自动生成主程序；</li>
<li>/resources中目录结构：<ol>
<li>static：保存静态资源；</li>
<li>templates：存所有的模板页面(使用嵌入的tomcat，不支持JSP页面，但是可以使用模板引擎)；</li>
<li>application.properties：SpringBoot的默认配置文件。</li>
</ol>
</li>
</ol>
<hr>
<h2 id="第二章-SpringBoot配置文件"><a href="#第二章-SpringBoot配置文件" class="headerlink" title="第二章 SpringBoot配置文件"></a>第二章 SpringBoot配置文件</h2><h3 id="2-1-SpringBoot配置文件"><a href="#2-1-SpringBoot配置文件" class="headerlink" title="2.1 SpringBoot配置文件"></a>2.1 SpringBoot配置文件</h3><p>SpringBoot使用全局配置文件，配置文件名是固定的。</p>
<ul>
<li>application.properties；</li>
<li>application.yml。</li>
</ul>
<p>配置文件的作用：<strong>修改SpringBoot默认配置。</strong></p>
<p>YAML：不仅仅是一个标记语言，以数据为中心，比json和xml更适合做配置文件。</p>
<p>YAML：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">	<span class="attr">port:</span> <span class="number">8081</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-2-YAML基本语法"><a href="#2-2-YAML基本语法" class="headerlink" title="2.2 YAML基本语法"></a>2.2 YAML基本语法</h3><p>key: value    表示键值对，冒号之后的空格必须有的，以空格来控制层级关系。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span> </span><br><span class="line">	<span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line">	<span class="attr">path:</span> <span class="string">/hello</span></span><br></pre></td></tr></table></figure>

<p><strong>属性和值大小写敏感。</strong></p>
<p>字面量：字符串默认不加单引号和双引号，<strong>双引号会转义特殊字符</strong>，<strong>单引号会转义特殊字符</strong>。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">k:</span> <span class="string">v</span></span><br></pre></td></tr></table></figure>

<p>对象(属性和值)：本质是键值对。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span></span><br><span class="line">	<span class="attr">name:</span> <span class="string">张三</span></span><br><span class="line">	<span class="attr">age:</span> <span class="number">14</span></span><br></pre></td></tr></table></figure>

<p>行内写法：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span> <span class="string">&#123;name:</span> <span class="string">张三,age:</span> <span class="number">15</span><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p>数组(List, Set)：</p>
<p>用-表示数组中的一个元素。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span></span><br><span class="line">	<span class="bullet">-</span> <span class="string">cat</span></span><br><span class="line">	<span class="bullet">-</span> <span class="string">dog</span></span><br><span class="line">	<span class="bullet">-</span> <span class="string">pig</span></span><br></pre></td></tr></table></figure>

<p>行内写法：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span> <span class="string">[cat,dog,pig]</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-1配置文件注入："><a href="#2-2-1配置文件注入：" class="headerlink" title="2.2.1配置文件注入："></a>2.2.1配置文件注入：</h4><p>application.yml文件：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8081</span></span><br><span class="line"></span><br><span class="line"><span class="attr">person:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">张三</span></span><br><span class="line"><span class="attr">  age:</span> <span class="number">18</span></span><br><span class="line"><span class="attr">  alive:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  birth:</span> <span class="number">2018</span><span class="string">/09/11</span></span><br><span class="line"><span class="attr">  classes:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">v1</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">v2</span></span><br><span class="line"><span class="attr">  map:</span></span><br><span class="line"><span class="attr">    k1:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">    k2:</span> <span class="string">v2</span></span><br><span class="line"><span class="attr">  dog:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">dog</span></span><br><span class="line"><span class="attr">    age:</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>JavaBean：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.po;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhulongkun20@163.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 18-9-11 下午8:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> alive;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; classes;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; map;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Student&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">", alive="</span> + alive +</span><br><span class="line">                <span class="string">", birth="</span> + birth +</span><br><span class="line">                <span class="string">", classes="</span> + classes +</span><br><span class="line">                <span class="string">", map="</span> + map +</span><br><span class="line">                <span class="string">", dog="</span> + dog +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以导入配置文件处理器之后，编写配置文件有IDE智能提示。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>@ConfigurationProperties(prefix = “person”)获取配置文件的值。</p>
<p><strong>application.properties乱码问题：file encoding勾选将properties配置文件转换成ascii码。</strong></p>
<p>配置文件的旧写法：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"person"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"lastName"</span> <span class="attr">value</span>=<span class="string">"zhagsa"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-Value注入值"><a href="#2-2-2-Value注入值" class="headerlink" title="2.2.2 @Value注入值"></a>2.2.2 @Value注入值</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;person.name&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"#&#123;11*2&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"true"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> alive;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; classes;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; map;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-Value和-ConfigurationProperties获取值比较："><a href="#2-2-3-Value和-ConfigurationProperties获取值比较：" class="headerlink" title="2.2.3 @Value和@ConfigurationProperties获取值比较："></a>2.2.3 @Value和@ConfigurationProperties获取值比较：</h4><table>
<thead>
<tr>
<th></th>
<th>@ConfigurationProperties</th>
<th>@Value</th>
</tr>
</thead>
<tbody><tr>
<td>功能</td>
<td>批量注入配置文件中的属性</td>
<td>单个指定变量的值</td>
</tr>
<tr>
<td>松散绑定</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>SpEL</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>JSR303数据校验</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>复杂类型封装</td>
<td>支持</td>
<td>不支持</td>
</tr>
</tbody></table>
<h4 id="2-2-4-Value和-ConfigurationProperties的比较"><a href="#2-2-4-Value和-ConfigurationProperties的比较" class="headerlink" title="2.2.4 @Value和@ConfigurationProperties的比较"></a>2.2.4 @Value和@ConfigurationProperties的比较</h4><p><strong>如果只是在某个业务逻辑中需要获取一下配置文件中的值，那就用@Value；如果专门编写了Java bean和配置文件进行映射，就直接使用@ConfigurationProperties。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhulongkun20@163.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 18-9-12 下午9:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;person.name&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/demo.do"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-3-PropertySource和-ImportSource"><a href="#2-3-PropertySource和-ImportSource" class="headerlink" title="2.3 @PropertySource和@ImportSource"></a>2.3 @PropertySource和@ImportSource</h3><p><strong>@ConfigurationProperties默认从全局配置文件中获取值。</strong></p>
<h4 id="2-3-1-PropertySource获取配置文件的值："><a href="#2-3-1-PropertySource获取配置文件的值：" class="headerlink" title="2.3.1 @PropertySource获取配置文件的值："></a>2.3.1 @PropertySource获取配置文件的值：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br><span class="line">@PropertySource(value = &#123;&quot;classpath:person.properties&quot;&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-ImportSource：导入Spring配置文件，是配置文件中的配置生效。"><a href="#2-3-2-ImportSource：导入Spring配置文件，是配置文件中的配置生效。" class="headerlink" title="2.3.2 @ImportSource：导入Spring配置文件，是配置文件中的配置生效。"></a>2.3.2 @ImportSource：导入Spring配置文件，是配置文件中的配置生效。</h4><p>SpringBoot默认没有加载Spring配置文件，手动编写的配置文件也无法识别，想让配置文件生效，将@ImportSource标注在主配置类上。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"demoService"</span> <span class="attr">class</span>=<span class="string">"com.demo.service.DemoService"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demoServiceTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> hasDemoService = applicationContext.containsBean(<span class="string">"demoService"</span>);</span><br><span class="line">    System.out.println(hasDemoService);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-3-SpringBoot推荐的添加组件方式"><a href="#2-3-3-SpringBoot推荐的添加组件方式" class="headerlink" title="2.3.3 SpringBoot推荐的添加组件方式"></a>2.3.3 SpringBoot推荐的添加组件方式</h4><p>SpringBoot推荐给容器中添加组件的方式：使用全注解，@Configuration标注配置类。</p>
<p>@Bean：<strong><u>将方法的返回值添加到容器中，组件的默认id就是方法名。</u></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.service.DemoService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhulongkun20@163.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 18-9-12 下午9:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@desc</span> 将方法的返回值添加到容器中，组件的默认id就是方法名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DemoService <span class="title">demoService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"给容器中添加组件"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DemoService();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-4-配置文件占位符"><a href="#2-4-配置文件占位符" class="headerlink" title="2.4 配置文件占位符"></a>2.4 配置文件占位符</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8081</span></span><br><span class="line"></span><br><span class="line"><span class="attr">person:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">张三$&#123;random.value&#125;</span></span><br><span class="line"><span class="attr">  age:</span> <span class="string">$&#123;random.int&#125;</span></span><br><span class="line"><span class="attr">  birth:</span> <span class="number">2018</span><span class="string">/09/11</span></span><br><span class="line"><span class="attr">  map:</span></span><br><span class="line"><span class="attr">    k1:</span> <span class="string">$&#123;random.value&#125;</span></span><br><span class="line"><span class="attr">    k2:</span> <span class="string">v2</span></span><br><span class="line"><span class="attr">  dog:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">$&#123;person.hello:defau&#125;</span></span><br><span class="line"><span class="attr">    age:</span> <span class="number">4</span></span><br><span class="line"><span class="attr">  alive:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  classes:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">v1</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">v2</span></span><br></pre></td></tr></table></figure>

<ol>
<li>随机数：</li>
</ol>
<p>${random.value}，${random.int}，${random.long}，${random.int(10)}，${random.int[1,10]}</p>
<ol>
<li>占位符获取配置之前的值，${app.name:默认值}</li>
</ol>
<hr>
<h3 id="2-5-Profile多环境支持"><a href="#2-5-Profile多环境支持" class="headerlink" title="2.5 Profile多环境支持"></a>2.5 Profile多环境支持</h3><blockquote>
<p>profile为不同环境提供不同配置的功能。</p>
</blockquote>
<ol>
<li><p>多profile文件的方式：</p>
<p>在主配置文件编写的时候，文件名可以是application-{profile}.properties/application-{profile}.yml；</p>
<p>SpringBoot默认使用全局环境配置</p>
</li>
<li><p>激活指定profile：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span></span><br><span class="line"><span class="attr">    active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure>

<p><strong>命令行方式：</strong></p>
<p>–spring.profiles.active=dev/prod</p>
<p><strong>虚拟机参数：</strong></p>
<p>-Dspring.profiles.active=dev/prod</p>
</li>
<li><p>yaml支持文档块的方式：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span></span><br><span class="line"><span class="attr">    active:</span> <span class="string">dev</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8083</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">dev</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">     port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">prod</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>见下图：<img src="https://image.youyou-2608.com/springboot/20180913201726.jpg" alt="厉害了"></p>
<hr>
<h3 id="2-6-配置文件加载位置"><a href="#2-6-配置文件加载位置" class="headerlink" title="2.6 配置文件加载位置"></a>2.6 配置文件加载位置</h3><p>SpringBoot启动会扫描以下位置的application.properties或者application.yml文件作为SpringBoot的默认配置文件：</p>
<ul>
<li>file：./config/</li>
<li>file：./</li>
<li>classpath：/config/</li>
<li>classpath：/</li>
</ul>
<p><strong>以上位置优先级从高到低。所有位置的配置文件都会被加载，高优先级的配置会覆盖低优先级的配置，高优先级和低优先级配置文件形成互补配置。</strong></p>
<p>server.context-path=/config02 -&gt; <a href="http://localhost:8080/config02/hello.do" target="_blank" rel="noopener">http://localhost:8080/config02/hello.do</a></p>
<p><strong>还可以通过spring.config.location来改变默认的配置文件位置(项目打包后可以使用命令行参数的形式启动项目时候来指定配置文件的位置，指定的配置文件和默认加载的配置文件会形成互补配置)。</strong></p>
<p>见下图：</p>
<p><img src="https://image.youyou-2608.com/springboot/20180913202351.jpg" alt="图片丢失"></p>
<hr>
<h3 id="2-7-外部配置文件加载顺序"><a href="#2-7-外部配置文件加载顺序" class="headerlink" title="2.7 外部配置文件加载顺序"></a>2.7 外部配置文件加载顺序</h3><p>SpringBoot也可以从以下位置加载配置文件，优先级从高到低，<strong>高优先级的配置会覆盖低优先级的配置，高低优先级的配置会形成互补配置</strong>。</p>
<ol>
<li><a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#using-boot-devtools-globalsettings" target="_blank" rel="noopener">Devtools global settings properties</a> on your home directory (<code>~/.spring-boot-devtools.properties</code> when devtools is active).</li>
<li><a href="https://docs.spring.io/spring/docs/5.0.9.RELEASE/javadoc-api/org/springframework/test/context/TestPropertySource.html" target="_blank" rel="noopener"><code>@TestPropertySource</code></a> annotations on your tests.</li>
<li><a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/api/org/springframework/boot/test/context/SpringBootTest.html" target="_blank" rel="noopener"><code>@SpringBootTest#properties</code></a> annotation attribute on your tests.</li>
<li>Command line arguments.</li>
<li>Properties from <code>SPRING_APPLICATION_JSON</code> (inline JSON embedded in an environment variable or system property).</li>
<li><code>ServletConfig</code> init parameters.</li>
<li><code>ServletContext</code> init parameters.</li>
<li>JNDI attributes from <code>java:comp/env</code>.</li>
<li>Java System properties (<code>System.getProperties()</code>).</li>
<li>OS environment variables.</li>
<li>A <code>RandomValuePropertySource</code> that has properties only in <code>random.*</code>.</li>
<li><a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-external-config-profile-specific-properties" target="_blank" rel="noopener">Profile-specific application properties</a> outside of your packaged jar (<code>application-{profile}.properties</code> and YAML variants).</li>
<li><a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-external-config-profile-specific-properties" target="_blank" rel="noopener">Profile-specific application properties</a> packaged inside your jar (<code>application-{profile}.properties</code> and YAML variants).</li>
<li>Application properties outside of your packaged jar (<code>application.properties</code> and YAML variants).</li>
<li>Application properties packaged inside your jar (<code>application.properties</code> and YAML variants).</li>
<li><a href="https://docs.spring.io/spring/docs/5.0.9.RELEASE/javadoc-api/org/springframework/context/annotation/PropertySource.html" target="_blank" rel="noopener"><code>@PropertySource</code></a> annotations on your <code>@Configuration</code> classes.</li>
<li>Default properties (specified by setting <code>SpringApplication.setDefaultProperties</code>).</li>
</ol>
<p>由jar包外向jar包内进行查找。</p>
<p>命令行参数（多个参数用空格分开）；</p>
<ul>
<li>java -jar xxx.jar –server.port=8081 server.context.path=/ab</li>
</ul>
<p>优先加载带profile的配置文件。</p>
<ul>
<li>jar包外的application-{profile}或application-{yml}或不带spring.profile的配置文件；</li>
<li>jar包内的application-{profile}或application-{yml}或不带spring.profile的配置文件；</li>
</ul>
<p>再加载带不profile的配置文件。</p>
<ul>
<li>jar包外的application-{profile}或application-{yml}或不带spring.profile的配置文件；</li>
<li>jar包内的application-{profile}或application-{yml}或不带spring.profile的配置文件；</li>
</ul>
<ul>
<li>@Configuration注解类上的@PropertySource；</li>
<li>通过SpringApplication.setDefaultProperties指定的默认属性。</li>
</ul>
<p>详细参见SpringBoot官网：<a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features" target="_blank" rel="noopener">SpringBoot外部配置文件加载顺序</a></p>
<hr>
<h3 id="2-8-自动配置原理"><a href="#2-8-自动配置原理" class="headerlink" title="2.8 自动配置原理"></a>2.8 自动配置原理</h3><p>配置文件能写什么，怎么写？</p>
<p>自动配置原理：</p>
<ol>
<li>SpringBoot在启动的时候加载主配置类，开启了自动配置功能：@EnableAutoConfiguration；</li>
<li>@EnableAutoConfiguration的作用：<ol>
<li>利用@EnableAutoConfigurationImportSelector给容器导入一些组件；</li>
<li>可以查看selectImports中的内容；</li>
<li>List<string> configurations = getCandidateConfigurations(annotationMetadata, attributes) 方法；<ul>
<li>SpringFactoriesLoader.loadFactoryNames()；</li>
<li>扫描所有jar包类路径下：META-INF/spring.factories；</li>
<li>将扫描到的文件内容加载包装成properties对象。</li>
</ul>
</string></li>
</ol>
</li>
<li>每一个自动配置类进行功能的自动配置；</li>
<li>所有在配置文件中能配置的属性都在xxxProperties类中配置着，配置文件能配置什么都参照配置文件中的值；</li>
</ol>
<p>SpringBoot的特点：</p>
<ol>
<li>SpringBoot启动时会加载大量的自动配置类；</li>
<li>看SpringBoot有没有自动配置类；</li>
<li>如果有，不用自己再写自动配置类。</li>
<li>给容器中自动配置类添加组件的时候，会从properties类中读取某些属性，我们就可以在配置文件中指定这些属性的值。</li>
</ol>
<hr>
<h3 id="2-9-Conditional自动配置"><a href="#2-9-Conditional自动配置" class="headerlink" title="2.9 @Conditional自动配置"></a>2.9 @Conditional自动配置</h3><blockquote>
<p>自动配置类需要在一定条件下才能生效。</p>
</blockquote>
<p>注解的作用：必须是@Conditional指定的条件成立，才能给容器中添加组件，配置里面的所有内容才生效。</p>
<table>
<thead>
<tr>
<th>@Conditional扩展</th>
<th>作用(判断是否满足当前条件)</th>
</tr>
</thead>
<tbody><tr>
<td>@ConditionalOnJava</td>
<td>系统的Java版本是否符合要求</td>
</tr>
<tr>
<td>@ConditionalOnBean</td>
<td>容器中存在指定的bean</td>
</tr>
<tr>
<td>@ConditionalOnMissingBean</td>
<td>容器中不存在指定的bean</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>满足SpEL表达式</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>容器中有指定的类</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>容器中没有指定的类</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>系统中指定属性是有指定的值</td>
</tr>
<tr>
<td>@ConditionalOnResource</td>
<td>类路径下是否存在指定资源文件</td>
</tr>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>当前是web环境</td>
</tr>
<tr>
<td>@ConditionalOnNotWebApplication</td>
<td>当前不是web环境</td>
</tr>
<tr>
<td>@ConditionalOnJndi</td>
<td>JNDI存在指定项</td>
</tr>
<tr>
<td>@ConditionalOnSingleCandidate</td>
<td>容器中只有一个指定的bean，或者这个bean是首选的bean</td>
</tr>
</tbody></table>
<p>自动配置文件：org/springframework/boot/spring-boot-autoconfigure/2.0.5.RELEASE/spring-boot-autoconfigure-2.0.5.RELEASE.jar!/META-INF/spring.factories</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"># Auto Configure</span><br><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoReactiveDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoReactiveRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.influx.InfluxDbAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.MongoReactiveAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.quartz.QuartzAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.reactor.core.ReactorCoreAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.servlet.SecurityRequestMatcherProviderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.reactive.WebSocketReactiveAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.servlet.WebSocketServletAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.servlet.WebSocketMessagingAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration</span><br></pre></td></tr></table></figure>

<p>开启SpringBoot的debug，可以通过debug=true让控制台打印自动配置报告，便可以方便的知道哪些自动配置类生效了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">============================</span><br><span class="line">CONDITIONS EVALUATION REPORT</span><br><span class="line">============================</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Positive matches:</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">   CodecsAutoConfiguration matched:</span><br><span class="line">      - @ConditionalOnClass found required class &apos;org.springframework.http.codec.CodecConfigurer&apos;; @ConditionalOnMissingClass did not find unwanted class (OnClassCondition)</span><br><span class="line"></span><br><span class="line">   CodecsAutoConfiguration.JacksonCodecConfiguration matched:</span><br><span class="line">      - @ConditionalOnClass found required class &apos;com.fasterxml.jackson.databind.ObjectMapper&apos;; @ConditionalOnMissingClass did not find unwanted class (OnClassCondition)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Negative matches:</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">   ActiveMQAutoConfiguration:</span><br><span class="line">      Did not match:</span><br><span class="line">         - @ConditionalOnClass did not find required classes &apos;javax.jms.ConnectionFactory&apos;, &apos;org.apache.activemq.ActiveMQConnectionFactory&apos; (OnClassCondition)</span><br><span class="line"></span><br><span class="line">   AopAutoConfiguration:</span><br><span class="line">      Did not match:</span><br><span class="line">         - @ConditionalOnClass did not find required classes &apos;org.aspectj.lang.annotation.Aspect&apos;, &apos;org.aspectj.lang.reflect.Advice&apos;, &apos;org.aspectj.weaver.AnnotatedElement&apos; (OnClassCondition)</span><br></pre></td></tr></table></figure>

<h2 id="第三章-SpringBoot与日志"><a href="#第三章-SpringBoot与日志" class="headerlink" title="第三章 SpringBoot与日志"></a>第三章 SpringBoot与日志</h2><hr>
<h3 id="3-1-日志框架"><a href="#3-1-日志框架" class="headerlink" title="3.1 日志框架"></a>3.1 日志框架</h3><ul>
<li>System.out.println(“welcome!”);  不利于代码维护；</li>
<li>使用日志框架；</li>
<li>加入异步，自动归档等功能；</li>
<li>与程序耦合控制；</li>
<li>统一的接口层：日志门面。</li>
</ul>
<p>常见的日志框架：</p>
<ul>
<li>JUL（java.util.logging）；</li>
<li>JCL；</li>
<li>jboss-logging；</li>
<li>logback；</li>
<li>log4j；</li>
<li>log4j2；</li>
<li>slf4j；</li>
</ul>
<p>日志门面：SLF4J；</p>
<p>日志实现：Logback。</p>
<p>SpringBoot：底层是Spring框架，SpringBoot框架默认是JCL</p>
<p><strong>SpringBoot选用SLF4J，Logback。</strong></p>
<hr>
<h3 id="3-2-SLF4J的使用"><a href="#3-2-SLF4J的使用" class="headerlink" title="3.2 SLF4J的使用"></a>3.2 SLF4J的使用</h3><hr>
<h4 id="3-2-1-如何在系统中使用SLF4J"><a href="#3-2-1-如何在系统中使用SLF4J" class="headerlink" title="3.2.1 如何在系统中使用SLF4J"></a>3.2.1 如何在系统中使用SLF4J</h4><p>开发的时候，日志记录的方法调用，应该直接调用日志抽象层里的方法，而不是日志的实现类。</p>
<p>给系统导入slf4j的jar和logback的实现jar：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Logger logger = LoggerFactory.getLogger(HelloWorld.class);</span><br><span class="line">    logger.info(<span class="string">"Hello World"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>图示：</p>
<p><img src="https://image.youyou-2608.com/springboot/concrete-bindings.png" alt="具体关系"></p>
<p>每一个日志框架都有自己的配置文件，使用slf4j以后，<strong>配置文件还是作为日志实现框架本身的配置文件。</strong></p>
<hr>
<h4 id="3-2-2-遗留问题"><a href="#3-2-2-遗留问题" class="headerlink" title="3.2.2 遗留问题"></a>3.2.2 遗留问题</h4><p>a（slf4j + logback）：Spring(commons-logging)，Hibernate(jboss-logging)</p>
<p>统一日志记录，即便是别的框架也使用同一日志框架。</p>
<p><img src="https://image.youyou-2608.com/springboot/legacy.png" alt></p>
<p>如何让系统中所有的日志都统一到slf4j：</p>
<ol>
<li><u>将系统中其他日志框架排除在外；</u></li>
<li><u>用中间适配层包替换原有日志框架；</u></li>
<li><u>导入slf4j其他的实现。</u></li>
</ol>
<hr>
<h3 id="3-3-SpringBoot日志关系"><a href="#3-3-SpringBoot日志关系" class="headerlink" title="3.3 SpringBoot日志关系"></a>3.3 SpringBoot日志关系</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>SpringBoot的日志功能：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>SpringBoot底层依赖关系（pom.xml文件，show diagram查看maven项目依赖关系）：</p>
<p><img src="https://image.youyou-2608.com/springboot/irei.png" alt></p>
<ol>
<li>SpringBoot底层也是用slf4j + logback的方式进行日志记录；</li>
<li>SpringBoot也把其他的日志都替换成了slf4j；</li>
<li>中间替换包；</li>
<li>如果要引入其他框架，一定要把这个框架的默认日志依赖移除。</li>
</ol>
<p><strong>SpringBoot自动适应所有的日志框架，而且底层使用了slf4j + logback的方式记录日志，引入其他框架的时候，只需要把这个框架依赖移除掉。</strong></p>
<hr>
<h3 id="3-4-SpringBoot默认日志配置"><a href="#3-4-SpringBoot默认日志配置" class="headerlink" title="3.4 SpringBoot默认日志配置"></a>3.4 SpringBoot默认日志配置</h3><p>日志的级别，由低到高，可以调整日志输出的级别：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Logger logger = LoggerFactory.getLogger(getClass());</span><br><span class="line"><span class="comment">//日志的级别，由低到高</span></span><br><span class="line">logger.trace(<span class="string">"这是日志..."</span>);</span><br><span class="line">logger.debug(<span class="string">"这是debug日志..."</span>);</span><br><span class="line">logger.info(<span class="string">"这是Info信息..."</span>);</span><br><span class="line">logger.warn(<span class="string">"这是警告..."</span>);</span><br><span class="line">logger.error(<span class="string">"这是错误信息..."</span>);</span><br></pre></td></tr></table></figure>

<p>SpringBoot默认日志输出级别为info。</p>
<p>可以在application.yml中自定义日志输出级别： logging.level.com.hape.nmsl=trace</p>
<p>在当前项目下生成日志文件：logging.file=springboot.log</p>
<p>不指定路径在项目路径下生成日志文件。</p>
<p>logfile优先级高于logpath。</p>
<p>logpath：指定日志文件的路径，默认文件名spring.log。</p>
<p>logging.pattern.console：控制台输出日志的格式。</p>
<p>logging.pattern.file：日志文件输出格式。</p>
<p>日志输出格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">%d：表示日期时间；</span><br><span class="line"></span><br><span class="line">%thread：表示线程号；</span><br><span class="line"></span><br><span class="line">%-5level：级别从左显示5个字符宽度；</span><br><span class="line"></span><br><span class="line">%logger&#123;50&#125;：表示logger名字最长50个字符，否则按照句点分割；</span><br><span class="line"></span><br><span class="line">%msg：日志信息；</span><br><span class="line"></span><br><span class="line">%n：换行符。</span><br></pre></td></tr></table></figure>

<p>日志格式配置实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-5-指定日志文件和日志profile功能"><a href="#3-5-指定日志文件和日志profile功能" class="headerlink" title="3.5 指定日志文件和日志profile功能"></a>3.5 指定日志文件和日志profile功能</h3><p>给类路径下放上每个日志框架自己配置文件即可，</p>
<blockquote>
<p>Because the standard <code>logback.xml</code> configuration file is loaded too early, you cannot use extensions in it. You need to either use <code>logback-spring.xml</code> or define a <code>logging.config</code> property.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Logging System</th>
<th>Customization</th>
</tr>
</thead>
<tbody><tr>
<td>Logback</td>
<td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code>, or <code>logback.groovy</code></td>
</tr>
<tr>
<td>Log4j2</td>
<td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td>
</tr>
<tr>
<td>JDK (Java Util Logging)</td>
<td><code>logging.properties</code></td>
</tr>
</tbody></table>
<p>logback.xml：直接被日志框架识别；</p>
<p><strong>logback-spring.xml：日志框架不直接加载配置项，由SpringBoot解析日志配置，可以使用SpringBoot的高级功能profile。</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">可以指定某一段配置只在某个环境下生效</span><br><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"staging"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- configuration to be enabled when the "staging" profile is active --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev, staging"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- configuration to be enabled when the "dev" or "staging" profiles are active--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"!production"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- configuration to be enabled when the "production" profile is not active --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-6-切换日志框架"><a href="#3-6-切换日志框架" class="headerlink" title="3.6 切换日志框架"></a>3.6 切换日志框架</h3><p>可以按照slf4j适配图进行相关的切换。</p>
<ol>
<li>排除不使用的包；</li>
<li>导入相关的适配包；</li>
</ol>
<p>不推荐更换SpringBoot默认使用的日志记录框架。</p>
<hr>
<h2 id="第四章-SpringBoot与Web开发"><a href="#第四章-SpringBoot与Web开发" class="headerlink" title="第四章 SpringBoot与Web开发"></a>第四章 SpringBoot与Web开发</h2><p>使用SpringBoot：</p>
<ul>
<li>创建SpringBoot应用，选中需要的模块；</li>
<li>SpringBoot自动配置好场景，需要在配置文件中指定少量配置，即可运行程序；</li>
<li>编写相关的业务逻辑。</li>
</ul>
<p>依赖于SpringBoot的自动配置。</p>
<hr>
<h3 id="4-1-webjar与静态资源映射规则"><a href="#4-1-webjar与静态资源映射规则" class="headerlink" title="4.1 webjar与静态资源映射规则"></a>4.1 webjar与静态资源映射规则</h3><p>SpringBoot对静态资源的映射规则：（WebMvcAutoConfiguration.java）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">        logger.debug(<span class="string">"Default resource handling disabled"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Duration cachePeriod = <span class="keyword">this</span>.resourceProperties.getCache().getPeriod();</span><br><span class="line">    CacheControl cacheControl = <span class="keyword">this</span>.resourceProperties.getCache()</span><br><span class="line">        .getCachecontrol().toHttpCacheControl();</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">"/webjars/**"</span>)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(registry</span><br><span class="line">                                             .addResourceHandler(<span class="string">"/webjars/**"</span>)</span><br><span class="line">                                             .addResourceLocations(<span class="string">"classpath:/META-INF/resources/webjars/"</span>)</span><br><span class="line">                                             .setCachePeriod(getSeconds(cachePeriod))</span><br><span class="line">                                             .setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">    String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(</span><br><span class="line">            registry.addResourceHandler(staticPathPattern)</span><br><span class="line">            .addResourceLocations(getResourceLocations(</span><br><span class="line">                <span class="keyword">this</span>.resourceProperties.getStaticLocations()))</span><br><span class="line">            .setCachePeriod(getSeconds(cachePeriod))</span><br><span class="line">            .setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>所有的/webjars/**，都到classpath:/META-INF/resources/webjars找资源；</p>
<p>webjars以jar包的方式引入静态资源。</p>
<p><img src="https://image.youyou-2608.com/springboot/webjars.png" alt></p>
</li>
</ul>
<p>在访问的时候只需要写webjars下的资源名称即可。（<a href="http://localhost:8080/webjars/jquery/3.3.1-1/jquery.js）" target="_blank" rel="noopener">http://localhost:8080/webjars/jquery/3.3.1-1/jquery.js）</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.1-1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>访问当前项目下的任何资源（静态资源的文件夹）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"classpath:/META-INF/resources/", </span><br><span class="line">"classpath:/resources/",</span><br><span class="line">"classpath:/static/",</span><br><span class="line">"classpath:/public/"</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置欢迎页</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title">welcomePageHandlerMapping</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    ApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> WelcomePageHandlerMapping(</span><br><span class="line">        <span class="keyword">new</span> TemplateAvailabilityProviders(applicationContext),</span><br><span class="line">        applicationContext, getWelcomePage(),</span><br><span class="line">        <span class="keyword">this</span>.mvcProperties.getStaticPathPattern());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>静态文件夹下的所有index.html页面；</p>
<p>映射到 private String staticPathPattern = “/**”;</p>
</li>
</ul>
<ul>
<li><p>配置喜欢的图标</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(value = <span class="string">"spring.mvc.favicon.enabled"</span>, matchIfMissing = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">FaviconConfiguration</span> <span class="keyword">implements</span> <span class="title">ResourceLoaderAware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ResourceProperties resourceProperties;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ResourceLoader resourceLoader;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FaviconConfiguration</span><span class="params">(ResourceProperties resourceProperties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.resourceProperties = resourceProperties;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>映射到**favicon.ico静态资源文件夹。</p>
</li>
</ul>
<hr>
<h3 id="4-2-引入Thymeleaf模板引擎"><a href="#4-2-引入Thymeleaf模板引擎" class="headerlink" title="4.2 引入Thymeleaf模板引擎"></a>4.2 引入Thymeleaf模板引擎</h3><blockquote>
<p>thymeleaf, jsp, freemaker, velocity</p>
</blockquote>
<p>SpringBoot推荐的thymeleaf：</p>
<ol>
<li>引入thymeleaf；</li>
<li>自定义thymeleaf版本。</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">thymeleaf.version</span>&gt;</span>3.0.2.RELEASE<span class="tag">&lt;/<span class="name">thymeleaf.version</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--布局功能支持程序  thymeleaf3  layout2以上版本适配--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">thymeleaf.layout.dialect.version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">thymeleaf.layout.dialect.version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="4-3-Thymeleaf语法"><a href="#4-3-Thymeleaf语法" class="headerlink" title="4.3 Thymeleaf语法"></a>4.3 Thymeleaf语法</h3><p>默认请求路径：classpath:templates/xxx.html</p>
<p>文档地址：<a href="https://www.thymeleaf.org/documentation.html" target="_blank" rel="noopener">Thymeleaf参考文档</a></p>
<p>使用方法：</p>
<ul>
<li><p>导入Thymeleaf名称空间；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http:y//www.thymeleaf.org"</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用Thymeleaf语法；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;hello&#125;"</span>&gt;</span>显示欢迎信息<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>thymeleaf语法规则：</p>
<ul>
<li><p>th:text：改变text文本值；</p>
</li>
<li><p>th:任意属性都可以替换；</p>
</li>
<li><p>文档第十章/Attributes/优先级；</p>
<p><img src="https://image.youyou-2608.com/springboot/DeepinScreenshot_select-area_20181001125611.png" alt></p>
</li>
</ul>
</li>
<li><p>thymeleaf表达式；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Simple expressions:</span><br><span class="line">    Variable Expressions: $&#123;...&#125;</span><br><span class="line">    Selection Variable Expressions: *&#123;...&#125;</span><br><span class="line">    Message Expressions: #&#123;...&#125;</span><br><span class="line">    Link URL Expressions: @&#123;...&#125;</span><br><span class="line">    Fragment Expressions: ~&#123;...&#125;</span><br><span class="line">Literals</span><br><span class="line">    Text literals: &apos;one text&apos; , &apos;Another one!&apos; ,...</span><br><span class="line">    Number literals: 0 , 34 , 3.0 , 12.3 ,...</span><br><span class="line">    Boolean literals: true , false</span><br><span class="line">    Null literal: null</span><br><span class="line">    Literal tokens: one , sometext , main ,...</span><br><span class="line">Text operations:</span><br><span class="line">    String concatenation: +</span><br><span class="line">    Literal substitutions: |The name is $&#123;name&#125;|</span><br><span class="line">    Arithmetic operations:</span><br><span class="line">    Binary operators: + , - , * , / , %</span><br><span class="line">    Minus sign (unary operator): -</span><br><span class="line">Boolean operations:</span><br><span class="line">    Binary operators: and , or</span><br><span class="line">    Boolean negation (unary operator): ! , not</span><br><span class="line">Comparisons and equality:</span><br><span class="line">    Comparators: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )</span><br><span class="line">    Equality operators: == , != ( eq , ne )</span><br><span class="line">Conditional operators:</span><br><span class="line">    If-then: (if) ? (then)</span><br><span class="line">    If-then-else: (if) ? (then) : (else)</span><br><span class="line">    Default: (value) ?: (defaultvalue)</span><br><span class="line">Special tokens:</span><br><span class="line">	Page 17 of 106No-Operation: _</span><br></pre></td></tr></table></figure>

<p>内置对象：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#ctx : the context object.</span><br><span class="line">#vars: the context variables.</span><br><span class="line">#locale : the context locale.</span><br><span class="line">#request : (only in Web Contexts) the HttpServletRequest object.</span><br><span class="line">#response : (only in Web Contexts) the HttpServletResponse object.</span><br><span class="line">#session : (only in Web Contexts) the HttpSession object.</span><br><span class="line">#servletContext : (only in Web Contexts) the ServletContext object.</span><br></pre></td></tr></table></figure>

</li>
</ul>
<hr>
<h3 id="4-4-SpringMVC自动配置功能"><a href="#4-4-SpringMVC自动配置功能" class="headerlink" title="4.4 SpringMVC自动配置功能"></a>4.4 SpringMVC自动配置功能</h3><p>SpringBoot文档地址：<a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications" target="_blank" rel="noopener">官方文档地址</a></p>
<h4 id="4-4-1-SpringMVC自动配置项"><a href="#4-4-1-SpringMVC自动配置项" class="headerlink" title="4.4.1 SpringMVC自动配置项"></a>4.4.1 SpringMVC自动配置项</h4><p>SpringMVC自动配置：</p>
<ul>
<li>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</li>
<li>Support for serving static resources, including support for WebJars (covered <a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-static-content" target="_blank" rel="noopener">later in this document</a>)).</li>
<li>Automatic registration of <code>Converter</code>, <code>GenericConverter</code>, and <code>Formatter</code> beans.</li>
<li>Support for <code>HttpMessageConverters</code> (covered <a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-message-converters" target="_blank" rel="noopener">later in this document</a>).</li>
<li>Automatic registration of <code>MessageCodesResolver</code> (covered <a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-message-codes" target="_blank" rel="noopener">later in this document</a>).</li>
<li>Static <code>index.html</code> support.</li>
<li>Custom <code>Favicon</code> support (covered <a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-favicon" target="_blank" rel="noopener">later in this document</a>).</li>
<li>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (covered <a href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-web-binding-initializer" target="_blank" rel="noopener">later in this document</a>).</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnBean</span>(ViewResolver.class)</span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(name = <span class="string">"viewResolver"</span>, value = ContentNegotiatingViewResolver.class)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ContentNegotiatingViewResolver <span class="title">viewResolver</span><span class="params">(BeanFactory beanFactory)</span> </span>&#123;</span><br><span class="line">    ContentNegotiatingViewResolver resolver = <span class="keyword">new</span> ContentNegotiatingViewResolver();</span><br><span class="line">    resolver.setContentNegotiationManager(</span><br><span class="line">        beanFactory.getBean(ContentNegotiationManager.class));</span><br><span class="line">    <span class="comment">// ContentNegotiatingViewResolver uses all the other view resolvers to locate</span></span><br><span class="line">    <span class="comment">// a view so it should have a high precedence</span></span><br><span class="line">    resolver.setOrder(Ordered.HIGHEST_PRECEDENCE);</span><br><span class="line">    <span class="keyword">return</span> resolver;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFormatters</span><span class="params">(FormatterRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Converter&lt;?, ?&gt; converter : getBeansOfType(Converter.class)) &#123;</span><br><span class="line">        registry.addConverter(converter);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (GenericConverter converter : getBeansOfType(GenericConverter.class)) &#123;</span><br><span class="line">        registry.addConverter(converter);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (Formatter&lt;?&gt; formatter : getBeansOfType(Formatter.class)) &#123;</span><br><span class="line">        registry.addFormatter(formatter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.messageConvertersProvider.ifAvailable((customConverters) -&gt; converters</span><br><span class="line">                                               .addAll(customConverters.getConverters()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果用户有配置(@Bean，@Component)，则使用组合配置；</li>
</ul>
<h4 id="4-4-2-扩展SpringMVC配置"><a href="#4-4-2-扩展SpringMVC配置" class="headerlink" title="4.4.2 扩展SpringMVC配置"></a>4.4.2 扩展SpringMVC配置</h4><p>添加一个配置类并且继承自WebMvcConfigurerAdapter。</p>
<p>将hello.do请求映射到hello.html视图：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.web.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ViewControllerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhulongkun20@163.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 18-10-1 下午1:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MvcConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        super.addViewControllers(registry);</span></span><br><span class="line">        registry.addViewController(<span class="string">"/hello.do"</span>).setViewName(<span class="string">"/hello.html"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>WebMvcAutoConfiguration是SpringMVC的自动配置类；</li>
<li>在做其他自动配置时会导入：@Import(EnableWebMvcConfiguration.class)。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span>(required = <span class="keyword">false</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfigurers</span><span class="params">(List&lt;WebMvcConfigurer&gt; configurers)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!CollectionUtils.isEmpty(configurers)) &#123;</span><br><span class="line">        <span class="keyword">this</span>.configurers.addWebMvcConfigurers(configurers);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>容器中所有的WebMvcConfiguration都会被调用。</p>
<p>所有的配置都会共同起作用。</p>
</li>
</ul>
<h4 id="4-4-3-全面接管SpringMVC"><a href="#4-4-3-全面接管SpringMVC" class="headerlink" title="4.4.3 全面接管SpringMVC"></a>4.4.3 全面接管SpringMVC</h4><p>在配置类中添加@EnableWebMvc：丢弃所有的自动配置，手动配置所有的配置。</p>
<p>原理：</p>
<p>WebMvc：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;DelegatingWebMvcConfiguration.class&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableWebMvc &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DelegatingWebMvcConfiguration：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> WebMvcConfigurerComposite configurers = <span class="keyword">new</span> WebMvcConfigurerComposite();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>WebMvcAutoConfiguration：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span>(type = Type.SERVLET)</span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span><br><span class="line"><span class="comment">//容器中缺少此组件，该自动配置生效</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(WebMvcConfigurationSupport.class)</span><br><span class="line"><span class="meta">@AutoConfigureOrder</span>(Ordered.HIGHEST_PRECEDENCE + <span class="number">10</span>)</span><br><span class="line"><span class="meta">@AutoConfigureAfter</span>(&#123; DispatcherServletAutoConfiguration.class,</span><br><span class="line">		ValidationAutoConfiguration.class &#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="4-5-引入资源"><a href="#4-5-引入资源" class="headerlink" title="4.5 引入资源"></a>4.5 引入资源</h3><p>SpringBoot中使用<strong>webjars</strong>引入jquery和bootstrap之类的资源：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;webjars/bootstrap/4.1.3/css/bootstrap.css&#125;"</span> <span class="attr">th:type</span>=<span class="string">"text/css"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>即使更换项目访问名也可以正常加载静态资源。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.web.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ViewControllerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhulongkun20@163.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 18-10-1 下午1:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//@EnableWebMvc</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MvcConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        super.addViewControllers(registry);</span></span><br><span class="line">        registry.addViewController(<span class="string">"/hello.do"</span>).setViewName(<span class="string">"/hello.html"</span>);</span><br><span class="line">        registry.addViewController(<span class="string">"/"</span>).setViewName(<span class="string">"/hello.html"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurerAdapter <span class="title">webMvcConfigurerAdapter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurerAdapter() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">                registry.addViewController(<span class="string">"/"</span>).setViewName(<span class="string">"/hello.html"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="4-6-国际化"><a href="#4-6-国际化" class="headerlink" title="4.6 国际化"></a>4.6 国际化</h3><ol>
<li><strong>编写国际化配置文件；</strong></li>
<li>使用ResourceBundleMessageSource管理国际化资源文件；</li>
<li>在页面使用fmt:message取出国际化内容。</li>
</ol>
<p>配置如下图：</p>
<p><img src="https://image.youyou-2608.com/springboot/international.png" alt></p>
<p>SpringBoot自动配置（MessageSourceAutoConfiguration.java）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="comment">//类路径下配置文件spring.messages</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.messages"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> MessageSourceProperties <span class="title">messageSourceProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MessageSourceProperties();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> MessageSource <span class="title">messageSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MessageSourceProperties properties = messageSourceProperties();</span><br><span class="line">    ResourceBundleMessageSource messageSource = <span class="keyword">new</span> ResourceBundleMessageSource();</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.hasText(properties.getBasename())) &#123;</span><br><span class="line">        <span class="comment">//设置国际化资源文件的基础名（去除国际语言代码）</span></span><br><span class="line">        messageSource.setBasenames(StringUtils.commaDelimitedListToStringArray(</span><br><span class="line">            StringUtils.trimAllWhitespace(properties.getBasename())));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (properties.getEncoding() != <span class="keyword">null</span>) &#123;</span><br><span class="line">        messageSource.setDefaultEncoding(properties.getEncoding().name());</span><br><span class="line">    &#125;</span><br><span class="line">    messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());</span><br><span class="line">    Duration cacheDuration = properties.getCacheDuration();</span><br><span class="line">    <span class="keyword">if</span> (cacheDuration != <span class="keyword">null</span>) &#123;</span><br><span class="line">        messageSource.setCacheMillis(cacheDuration.toMillis());</span><br><span class="line">    &#125;</span><br><span class="line">    messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());</span><br><span class="line">    messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());</span><br><span class="line">    <span class="keyword">return</span> messageSource;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>设置配置文件地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.message=login</span><br></pre></td></tr></table></figure>

<p>页面中获取国际化资源：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">lable</span> <span class="attr">class</span>=<span class="string">"sr-only"</span> <span class="attr">th:message</span>=<span class="string">"#&#123;login.tip&#125;"</span>&gt;</span>Tips<span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">lable</span> <span class="attr">class</span>=<span class="string">"sr-only"</span> <span class="attr">th:message</span>=<span class="string">"#&#123;login.username&#125;"</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">lable</span> <span class="attr">class</span>=<span class="string">"sr-only"</span> <span class="attr">th:message</span>=<span class="string">"#&#123;login.password&#125;"</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">lable</span> <span class="attr">class</span>=<span class="string">"sr-only"</span> <span class="attr">th:message</span>=<span class="string">"#&#123;login.remember&#125;"</span>&gt;</span>remember<span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>浏览器根据浏览器语言设置的信息自动切换国际化。</p>
<p>SpringMVC区域信息组件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(prefix = <span class="string">"spring.mvc"</span>, name = <span class="string">"locale"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> LocaleResolver <span class="title">localeResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.mvcProperties</span><br><span class="line">        .getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> FixedLocaleResolver(<span class="keyword">this</span>.mvcProperties.getLocale());</span><br><span class="line">    &#125;</span><br><span class="line">    AcceptHeaderLocaleResolver localeResolver = <span class="keyword">new</span> AcceptHeaderLocaleResolver();</span><br><span class="line">    localeResolver.setDefaultLocale(<span class="keyword">this</span>.mvcProperties.getLocale());</span><br><span class="line">    <span class="keyword">return</span> localeResolver;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//默认根据请求头获取的区域信息展示国际化信息。</span></span><br></pre></td></tr></table></figure>

<p><strong>可以在请求参数上携带区域信息实现国际化：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://localhost:8080/hello.do?language=zh_CN</span><br><span class="line">https://localhost:8080/hello.do?language=en_US</span><br></pre></td></tr></table></figure>

<p>手动配置区域信息解析器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.web.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.LocaleResolver;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhulongkun20@163.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 18-10-3 下午4:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocaleResolver</span> <span class="keyword">implements</span> <span class="title">LocaleResolver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Locale <span class="title">resolveLocale</span><span class="params">(HttpServletRequest httpServletRequest)</span> </span>&#123;</span><br><span class="line">        String language = httpServletRequest.getParameter(<span class="string">"language"</span>);</span><br><span class="line">        Locale locale = Locale.getDefault();</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(language)) &#123;</span><br><span class="line">            String[] regionInfo = language.split(<span class="string">"_"</span>);</span><br><span class="line">            locale = <span class="keyword">new</span> Locale(regionInfo[<span class="number">0</span>], regionInfo[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> locale;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLocale</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Locale locale)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="4-7-拦截器"><a href="#4-7-拦截器" class="headerlink" title="4.7 拦截器"></a>4.7 拦截器</h3><ul>
<li>PostMapping()：RestfulAPI注解；</li>
<li>开发期间禁用Thymeleaf的缓存：spring.thymeleaf.cache=false；</li>
<li>错误消息的显示；</li>
<li>防止表单重复提交，添加视图视图映射后，使用重定向。</li>
<li>使用拦截器进行身份校验；</li>
<li>编写拦截器，在配置类中注册拦截器。</li>
<li>页面中使用Thymeleaf获取值。</li>
</ul>
<hr>
<h3 id="4-8-CRUD实验"><a href="#4-8-CRUD实验" class="headerlink" title="4.8 CRUD实验"></a>4.8 CRUD实验</h3><h4 id="4-8-1-实验要求"><a href="#4-8-1-实验要求" class="headerlink" title="4.8.1 实验要求"></a>4.8.1 实验要求</h4><p>实验要求：</p>
<ol>
<li><p>RestfulAPI风格：</p>
<ol>
<li>URI：/资源名称/资源标识；</li>
<li>HTTP请求方式区分对资源的CRUD操作；</li>
</ol>
<table>
<thead>
<tr>
<th>操作</th>
<th>普通CRUD</th>
<th>RestfulCRUD</th>
</tr>
</thead>
<tbody><tr>
<td>查询</td>
<td>getEmp</td>
<td>emp—GET</td>
</tr>
<tr>
<td>添加</td>
<td>addEmp?xxx</td>
<td>emp—POST</td>
</tr>
<tr>
<td>修改</td>
<td>updateEmp?id=xxx&amp;xxx=xxx</td>
<td>emp/{id}—PUT</td>
</tr>
<tr>
<td>删除</td>
<td>deleteEmp?id=1</td>
<td>emp/{id}—DELETE</td>
</tr>
</tbody></table>
</li>
</ol>
<ol>
<li><p>实验的请求架构：</p>
<table>
<thead>
<tr>
<th></th>
<th>请求URI</th>
<th>请求方式</th>
</tr>
</thead>
<tbody><tr>
<td>查询所有的员工</td>
<td>emps</td>
<td>GET</td>
</tr>
<tr>
<td>查询某个员工</td>
<td>emp/{id}</td>
<td>GET</td>
</tr>
<tr>
<td>来到添加界面</td>
<td>emp</td>
<td>GET</td>
</tr>
<tr>
<td>添加员工</td>
<td>emp</td>
<td>POST</td>
</tr>
<tr>
<td>来到修改界面</td>
<td>emp/{id}</td>
<td>PUT</td>
</tr>
<tr>
<td>修改员工</td>
<td>emp</td>
<td>PUT</td>
</tr>
<tr>
<td>删除员工</td>
<td>emp/{id}</td>
<td>DELETE</td>
</tr>
</tbody></table>
</li>
</ol>
<h4 id="4-8-2-公共页面抽取—列表页"><a href="#4-8-2-公共页面抽取—列表页" class="headerlink" title="4.8.2 公共页面抽取—列表页"></a>4.8.2 公共页面抽取—列表页</h4><ol>
<li><p>利用Thymeleaf抽取公共页面；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">"copy"</span>&gt;</span></span><br><span class="line">&amp;copy; 2011 The Good Thymes Virtual Grocery</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>“~{templatename::selector}”：模板名选择器；</p>
<p>~{templatename::fragmentname}：模板名：片断名。</p>
</li>
<li><p>默认效果：</p>
<p>insert片段都在div标签中</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>三种引入功能片段的th属性：</p>
<ol>
<li><strong>th:insert：将公共片段整个插入到声明引入的元素中；</strong></li>
<li><strong>th:replace：将声明引入的元素替换为公共片段；</strong></li>
<li><strong>th:include：将被引入的片段的内容包含进这个标签中。</strong></li>
</ol>
</li>
</ol>
<hr>
<h4 id="4-8-3-链接高亮-amp-列表完成"><a href="#4-8-3-链接高亮-amp-列表完成" class="headerlink" title="4.8.3 链接高亮&amp;列表完成"></a>4.8.3 链接高亮&amp;列表完成</h4><p><img src="https://image.youyou-2608.com/springboot/paramterizable.png" alt></p>
<p><strong>实现方法：引入公共片段时传入相关参数，公共片段根据参数高亮相关部分。</strong></p>
<p>Thymeleaf日期工具对象(文档附录 &gt; dates)：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#dates : methods for java.util.Date objects: formatting, component extraction, etc.</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$&#123;#dates.format(date, &apos;dd/MMM/yyyy HH:mm&apos;)&#125;</span><br><span class="line">$&#123;#dates.arrayFormat(datesArray, &apos;dd/MMM/yyyy HH:mm&apos;)&#125;</span><br><span class="line">$&#123;#dates.listFormat(datesList, &apos;dd/MMM/yyyy HH:mm&apos;)&#125;</span><br><span class="line">$&#123;#dates.setFormat(datesSet, &apos;dd/MMM/yyyy HH:mm&apos;)&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="4-8-4-添加员工-gt-来到添加页面"><a href="#4-8-4-添加员工-gt-来到添加页面" class="headerlink" title="4.8.4 添加员工 &gt; 来到添加页面"></a>4.8.4 添加员工 &gt; 来到添加页面</h4><ol>
<li>添加表单：Bootstrap官网模板直接复制；</li>
<li>通过 *<em>添加 *</em>按钮跳转到添加页面；</li>
<li>使用th:each完成部门的遍历；</li>
</ol>
<hr>
<h4 id="4-8-5-添加员工-gt-完成添加"><a href="#4-8-5-添加员工-gt-完成添加" class="headerlink" title="4.8.5 添加员工 &gt; 完成添加"></a>4.8.5 添加员工 &gt; 完成添加</h4><ol>
<li>完成添加后 <strong>重定向</strong> 至列表页面（forward或者redirect）；</li>
<li>提交的数据格式问题：日期格式：<ol>
<li>日期格式化：SpringMVC将页面提交的值需要转换成指定的类型；</li>
<li><strong>在配置文件中自定义表单提交的日期格式。</strong></li>
</ol>
</li>
</ol>
<hr>
<h4 id="4-8-6-修改员工信息"><a href="#4-8-6-修改员工信息" class="headerlink" title="4.8.6 修改员工信息"></a>4.8.6 修改员工信息</h4><ol>
<li>配置HiddenHttpMethodFilter；</li>
</ol>
<hr>
<h4 id="4-8-7-删除员工"><a href="#4-8-7-删除员工" class="headerlink" title="4.8.7 删除员工"></a>4.8.7 删除员工</h4><hr>
<h3 id="4-9-定制错误页面"><a href="#4-9-定制错误页面" class="headerlink" title="4.9 定制错误页面"></a>4.9 定制错误页面</h3><ol>
<li><p>默认出错处理：返回一个默认的错误处理页面：在页面共享信息；</p>
</li>
<li><p>如果是其他客户端，默认响应一个json数据；</p>
</li>
<li><p>可以参照ErrorAutoConfiguration，错误处理的自动配置，在容器中添加如下组件：</p>
<ol>
<li><p>DefaultErrorAttributes；</p>
</li>
<li><p>BasicErrorController：处理默认的error错误请求；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(produces = <span class="string">"text/html"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">errorHtml</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                              HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">    HttpStatus status = getStatus(request);</span><br><span class="line">    Map&lt;String, Object&gt; model = Collections.unmodifiableMap(getErrorAttributes(</span><br><span class="line">        request, isIncludeStackTrace(request, MediaType.TEXT_HTML)));</span><br><span class="line">    response.setStatus(status.value());</span><br><span class="line">    ModelAndView modelAndView = resolveErrorView(request, response, status, model);</span><br><span class="line">    <span class="keyword">return</span> (modelAndView != <span class="keyword">null</span>) ? modelAndView : <span class="keyword">new</span> ModelAndView(<span class="string">"error"</span>, model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ErrorPageCustomizer：系统出现错误，来到/error请求进行处理：web.xml；</p>
</li>
<li><p>DefaultErrorViewResolver；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    Map&lt;Series, String&gt; views = <span class="keyword">new</span> EnumMap&lt;&gt;(Series.class);</span><br><span class="line">    views.put(Series.CLIENT_ERROR, <span class="string">"4xx"</span>);</span><br><span class="line">    views.put(Series.SERVER_ERROR, <span class="string">"5xx"</span>);</span><br><span class="line">    SERIES_VIEWS = Collections.unmodifiableMap(views);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveErrorView</span><span class="params">(HttpServletRequest request, HttpStatus status,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">    ModelAndView modelAndView = resolve(String.valueOf(status), model);</span><br><span class="line">    <span class="keyword">if</span> (modelAndView == <span class="keyword">null</span> &amp;&amp; SERIES_VIEWS.containsKey(status.series())) &#123;</span><br><span class="line">        modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ModelAndView <span class="title">resolve</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">    String errorViewName = <span class="string">"error/"</span> + viewName;</span><br><span class="line">    TemplateAvailabilityProvider provider = <span class="keyword">this</span>.templateAvailabilityProviders</span><br><span class="line">        .getProvider(errorViewName, <span class="keyword">this</span>.applicationContext);</span><br><span class="line">    <span class="keyword">if</span> (provider != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(errorViewName, model);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resolveResource(errorViewName, model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<p>定制自定义错误页面：</p>
<ol>
<li><p>有模板引擎的情况下：error/状态码，将错误命名为status_code.html放在classpath:error/下，发生此错误会来到该页面；</p>
<p>可以使用4xx和5xx作为错误页面的文件名来匹配该类型的所有错误，精确匹配优先；</p>
<p>页面能获取的信息：</p>
<ol>
<li>timestamp；</li>
<li>message；</li>
<li>status code；</li>
<li>exception；</li>
<li>errors。</li>
</ol>
</li>
<li><p>没有模板引擎：静态资源文件夹下寻找。</p>
</li>
</ol>
<p>定制自定义json数据：</p>
<ol>
<li><p>没有自适应效果，浏览器和客户端返回的都是json数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@ExceptionHandler</span></span><br><span class="line"><span class="meta">@Response</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>自适应效果：转发给/error进行自适应效果处理，给request中传入自己的参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(produces = <span class="string">"text/html"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">errorHtml</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                              HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">    HttpStatus status = getStatus(request);</span><br><span class="line">    Map&lt;String, Object&gt; model = Collections.unmodifiableMap(getErrorAttributes(</span><br><span class="line">        request, isIncludeStackTrace(request, MediaType.TEXT_HTML)));</span><br><span class="line">    response.setStatus(status.value());</span><br><span class="line">    ModelAndView modelAndView = resolveErrorView(request, response, status, model);</span><br><span class="line">    <span class="keyword">return</span> (modelAndView != <span class="keyword">null</span>) ? modelAndView : <span class="keyword">new</span> ModelAndView(<span class="string">"error"</span>, model);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) &#123;</span><br><span class="line">    Map&lt;String, Object&gt; body = getErrorAttributes(request,</span><br><span class="line">                                                  isIncludeStackTrace(request, MediaType.ALL));</span><br><span class="line">    HttpStatus status = getStatus(request);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(body, status);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将自定义错误信息携带：</p>
<p>响应数据由getErrorAttributes()获取：</p>
<ol>
<li><p>编写一个ErrorController的实现类或者AbstractErrorController的子类，放在容器中；</p>
</li>
<li><p>页面上能用的数据或者json返回的数据都是errorAttributes.getErrorAttributes得到；DefaultErrorAttributes.getErrorAttributes()进行错误处理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.web.config;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.error.DefaultErrorAttributes;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhulongkun20@163.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 18-10-7 下午4:25</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyErrorHandler</span> <span class="keyword">extends</span> <span class="title">DefaultErrorAttributes</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getErrorAttributes</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            org.springframework.web.reactive.function.server.ServerRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">boolean</span> includeStackTrace)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getErrorAttributes(request, includeStackTrace);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<hr>
<h2 id="第五章-配置嵌入式Servlet容器"><a href="#第五章-配置嵌入式Servlet容器" class="headerlink" title="第五章 配置嵌入式Servlet容器"></a>第五章 配置嵌入式Servlet容器</h2><hr>
<h3 id="5-1-定制嵌入式Servlet容器"><a href="#5-1-定制嵌入式Servlet容器" class="headerlink" title="5.1 定制嵌入式Servlet容器"></a>5.1 定制嵌入式Servlet容器</h3><p>默认使用嵌入式tomcat8.5.4作为嵌入式的Servlet容器；</p>
<p><img src="https://image.youyou-2608.com/springboot/tomcat.png" alt></p>
<ol>
<li>如何定制嵌入式的Servlet容器？</li>
<li>SpringBoot能否支持其他的Servlet容器？</li>
</ol>
<ol>
<li>修改和Server有关的配置(server.properties)：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server.port=8080</span><br><span class="line">servet.context-path=/path</span><br></pre></td></tr></table></figure>

<ol>
<li><p><strong>编写一个EmbeddedServletContainerCustomizer来修改嵌入式Servlet容器：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> EmbeddedServletContainerCustomizer <span class="title">embeddedServletContainerCustomizer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(ConfigurableEmbeddedServletContainer container)</span> </span>&#123;</span><br><span class="line">        container.setPort(<span class="number">8083</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>与容器相关的类：ServerProperties.class</p>
<p>SpringBoot2.0：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedTomcatConfig</span> <span class="keyword">implements</span> <span class="title">WebServerFactoryCustomizer</span>&lt;<span class="title">ConfigurableServletWebServerFactory</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(ConfigurableServletWebServerFactory factory)</span> </span>&#123;</span><br><span class="line">        factory.setContextPath(<span class="string">"/test"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="5-2-注册Servlet容器三大组件"><a href="#5-2-注册Servlet容器三大组件" class="headerlink" title="5.2 注册Servlet容器三大组件"></a>5.2 注册Servlet容器三大组件</h3><p>Servlet：ServletRegistrationBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletRegistrationBean&lt;MyServlet&gt; <span class="title">myServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ServletRegistrationBean&lt;&gt;(<span class="keyword">new</span> MyServlet(), <span class="string">"/servlet.do"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Filter：FilterRegistrationBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FilterRegistrationBean&lt;MyFilter&gt; <span class="title">myFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FilterRegistrationBean&lt;MyFilter&gt; registrationBean = <span class="keyword">new</span> FilterRegistrationBean&lt;&gt;();</span><br><span class="line">    registrationBean.setFilter(<span class="keyword">new</span> MyFilter());</span><br><span class="line">    registrationBean.setUrlPatterns(Arrays.asList(<span class="string">"/hello.do"</span>, <span class="string">"/nihao.do"</span>));</span><br><span class="line">    <span class="keyword">return</span> registrationBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Listener：ServletListenerRegistrationBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletListenerRegistrationBean&lt;MyListener&gt; <span class="title">myListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ServletListenerRegistrationBean&lt;MyListener&gt; registrationBean = <span class="keyword">new</span> ServletListenerRegistrationBean&lt;MyListener&gt;();</span><br><span class="line">    registrationBean.setListener(<span class="keyword">new</span> MyListener());</span><br><span class="line">    <span class="keyword">return</span> registrationBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="5-3-嵌入式Servlet容器自动配置原理"><a href="#5-3-嵌入式Servlet容器自动配置原理" class="headerlink" title="5.3 嵌入式Servlet容器自动配置原理"></a>5.3 嵌入式Servlet容器自动配置原理</h3><p>EmbeddedWebServerFactoryCustomizerAutoConfiguration.class</p>
<p>Tomcat：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123; Tomcat.class, UpgradeProtocol.class &#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">TomcatWebServerFactoryCustomizerConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TomcatWebServerFactoryCustomizer <span class="title">tomcatWebServerFactoryCustomizer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        Environment environment, ServerProperties serverProperties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TomcatWebServerFactoryCustomizer(environment, serverProperties);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Jetty：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123; Server.class, Loader.class, WebAppContext.class &#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">JettyWebServerFactoryCustomizerConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JettyWebServerFactoryCustomizer <span class="title">jettyWebServerFactoryCustomizer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        Environment environment, ServerProperties serverProperties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JettyWebServerFactoryCustomizer(environment, serverProperties);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Undertow：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123; Undertow.class, SslClientAuthMode.class &#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">UndertowWebServerFactoryCustomizerConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UndertowWebServerFactoryCustomizer <span class="title">undertowWebServerFactoryCustomizer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        Environment environment, ServerProperties serverProperties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UndertowWebServerFactoryCustomizer(environment, serverProperties);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置文件：Server.properties：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"server"</span>, ignoreUnknownFields = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerProperties</span> </span>&#123;</span><br></pre></td></tr></table></figure>

<p>ConfigurableTomcatWebServerFactory.class：</p>
<p><img src="https://image.youyou-2608.com/springboot/hy.png" alt></p>
<hr>
<h3 id="5-4-使用外置的Servlet容器"><a href="#5-4-使用外置的Servlet容器" class="headerlink" title="5.4 使用外置的Servlet容器"></a>5.4 使用外置的Servlet容器</h3><p>内置的servlet容器不支持jsp；</p>
<ol>
<li>向项目中导入tomcat服务器，创建web.xml文件，添加application.properties配置；打包方式为war包；</li>
</ol>
<p>必须编写一个ServletInitializer文件；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletInitializer</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(SpringApplicationBuilder application)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> application.sources($&#123;MainClass&#125;.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>将嵌入式spring-boot-start-web内嵌的tomcat的scope指定为provided；</li>
</ol>
<hr>
<h2 id="第六章-Docker技术"><a href="#第六章-Docker技术" class="headerlink" title="第六章 Docker技术"></a>第六章 Docker技术</h2><h3 id="6-1-docker简介"><a href="#6-1-docker简介" class="headerlink" title="6.1 docker简介"></a>6.1 docker简介</h3><p>概念：Docker是一个开源的引擎，可以轻松的为任何应用创建一个轻量级的、可移植的、自给自足的容器。开发者在笔记本上编译测试通过的容器可以批量地在生产环境中部署，包括VMs（虚拟机）、<a href="http://www.whatis.com.cn/word_5275.htm" target="_blank" rel="noopener">bare metal</a>、OpenStack 集群和其他的基础应用平台。 </p>
<p><a href="http://www.docker.org.cn/book/docker/what-is-docker-16.html" target="_blank" rel="noopener">Docker入门</a></p>
<p><img src="https://image.youyou-2608.com/springboot/image_docker.png" alt></p>
<hr>
<h3 id="6-2-Docker核心概念"><a href="#6-2-Docker核心概念" class="headerlink" title="6.2 Docker核心概念"></a>6.2 Docker核心概念</h3><ol>
<li>docker主机(Host)：安装了Docker程序的机器(Docker直接安装在操作系统之上)；</li>
<li>docker客户端(Client)：连接Docker主机进行操作；</li>
<li>docker仓库(Registry)：用来保存各种打包好的软件镜像；</li>
<li>docker镜像(Images)：软件打包好的镜像，放在docker仓库中；</li>
<li>docker容器(Container)：镜像启动后的实例称为一个容器，容器是独立运行的一个或一组应用；</li>
</ol>
<p>使用docker容器的步骤：</p>
<ol>
<li>安装docker；</li>
<li>去docker仓库找到这个软件对应的镜像；</li>
<li>使用docker运行这个镜像，就会生成一个Docker镜像容器；</li>
<li>对容器的启动和停止就是对软件的启动和停止。</li>
</ol>
<hr>
<h3 id="6-3-Docker常用操作"><a href="#6-3-Docker常用操作" class="headerlink" title="6.3 Docker常用操作"></a>6.3 Docker常用操作</h3><p>镜像官方网站：<a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql     //搜索镜像</span><br><span class="line">docker pull mysql:5.5   //拉取镜像</span><br><span class="line">docker images           //查看本地所有镜像</span><br><span class="line">docker rmi images-id    //删除本地镜像</span><br></pre></td></tr></table></figure>

<p><img src="https://image.youyou-2608.com/springboot/docker_run.png" alt></p>
<p><strong>各个独立的容器互不干扰，独立运行。</strong></p>
<hr>
<h3 id="6-4-环境搭建"><a href="#6-4-环境搭建" class="headerlink" title="6.4 环境搭建"></a>6.4 环境搭建</h3><h4 id="6-4-1-安装MySQL："><a href="#6-4-1-安装MySQL：" class="headerlink" title="6.4.1 安装MySQL："></a>6.4.1 安装MySQL：</h4><p>启动一个MySQL实例(需要指定密码和<strong>端口映射</strong>)：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -p port --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span></span><br></pre></td></tr></table></figure>

<p>官方文档：<a href="https://hub.docker.com/_/mysql/" target="_blank" rel="noopener">MySQL文档</a></p>
<p>几个高级操作：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用配置文件：</span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run --name some-mysql -v /my/custom:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span></span><br><span class="line"></span><br><span class="line">不适用配置文件：</span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span></span><br></pre></td></tr></table></figure>

<h4 id="6-4-2-安装Redis"><a href="#6-4-2-安装Redis" class="headerlink" title="6.4.2 安装Redis"></a>6.4.2 安装Redis</h4><h4 id="6-4-3-安装RabbitMQ"><a href="#6-4-3-安装RabbitMQ" class="headerlink" title="6.4.3 安装RabbitMQ"></a>6.4.3 安装RabbitMQ</h4><h4 id="6-4-4-安装ElasticSearch"><a href="#6-4-4-安装ElasticSearch" class="headerlink" title="6.4.4 安装ElasticSearch"></a>6.4.4 安装ElasticSearch</h4><hr>
<h2 id="第七章-SpringBoot与数据库访问"><a href="#第七章-SpringBoot与数据库访问" class="headerlink" title="第七章 SpringBoot与数据库访问"></a>第七章 SpringBoot与数据库访问</h2><p>SpringBoot与数据访问相关的场景启动器：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">spring-boot-starter-data-cassandra</span><br><span class="line"></span><br><span class="line">Starter for using Cassandra distributed database and Spring Data Cassandra</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-cassandra-reactive</span><br><span class="line"></span><br><span class="line">Starter for using Cassandra distributed database and Spring Data Cassandra Reactive</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-couchbase</span><br><span class="line"></span><br><span class="line">Starter for using Couchbase document-oriented database and Spring Data Couchbase</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-couchbase-reactive</span><br><span class="line"></span><br><span class="line">Starter for using Couchbase document-oriented database and Spring Data Couchbase Reactive</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-elasticsearch</span><br><span class="line"></span><br><span class="line">Starter for using Elasticsearch search and analytics engine and Spring Data Elasticsearch</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-jpa</span><br><span class="line"></span><br><span class="line">Starter for using Spring Data JPA with Hibernate</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-ldap</span><br><span class="line"></span><br><span class="line">Starter for using Spring Data LDAP</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-mongodb</span><br><span class="line"></span><br><span class="line">Starter for using MongoDB document-oriented database and Spring Data MongoDB</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-mongodb-reactive</span><br><span class="line"></span><br><span class="line">Starter for using MongoDB document-oriented database and Spring Data MongoDB Reactive</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-neo4j</span><br><span class="line"></span><br><span class="line">Starter for using Neo4j graph database and Spring Data Neo4j</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-redis</span><br><span class="line"></span><br><span class="line">Starter for using Redis key-value data store with Spring Data Redis and the Lettuce client</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-redis-reactive</span><br><span class="line"></span><br><span class="line">Starter for using Redis key-value data store with Spring Data Redis reactive and the Lettuce client</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-rest</span><br><span class="line"></span><br><span class="line">Starter for exposing Spring Data repositories over REST using Spring Data REST</span><br><span class="line"></span><br><span class="line">Pom</span><br><span class="line"></span><br><span class="line">spring-boot-starter-data-solr</span><br><span class="line"></span><br><span class="line">Starter for using the Apache Solr search platform with Spring Data Solr</span><br><span class="line"></span><br><span class="line">Pom</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="7-1-整合JDBC与数据源"><a href="#7-1-整合JDBC与数据源" class="headerlink" title="7.1 整合JDBC与数据源"></a>7.1 整合JDBC与数据源</h3><p>建表语句执行：classpath:schema-*.sql</p>
<p>数据操作语句：classpath:data-*.sql</p>
<p>也可以使用schema在application.yml中自定义数据文件地址。</p>
<hr>
<h3 id="7-2-Druid数据源配置"><a href="#7-2-Druid数据源配置" class="headerlink" title="7.2 Druid数据源配置"></a>7.2 Druid数据源配置</h3><ol>
<li>引入依赖；</li>
<li>配置属性。</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type指定数据源</span><br></pre></td></tr></table></figure>

<p>添加一个配置类，将Druid配置映射到数据源。</p>
<p>结合过滤器和Servlet设置Druid监控。</p>
<hr>
<h3 id="7-3-整合MyBatis"><a href="#7-3-整合MyBatis" class="headerlink" title="7.3 整合MyBatis"></a>7.3 整合MyBatis</h3><p>启动器：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mybatis-spring-boot-starter</span><br></pre></td></tr></table></figure>

<p>获取插入数据库的记录的ID：</p>
<p>@Options(userGeneratedKeys=, keyProperty=）</p>
<p>开启MyBatis驼峰命名：</p>
<p>写一个配置类，实现ConfigurationCustomizer接口中的customize()方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configuration.setMapUnderscopeToCamelCase(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>

<p>批量扫描所有的@Mapper注解：</p>
<p>@MapperScan(value=””)</p>
<p>相关配置文件见官网文档。</p>
<p>全局配置文件配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mybatis-config-location:classpath:mybatis/config.xml</span><br><span class="line">mybatis-config-mapper:class:mybatis/mapper.xml</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="7-4-SpringData数据访问JPA"><a href="#7-4-SpringData数据访问JPA" class="headerlink" title="7.4 SpringData数据访问JPA"></a>7.4 SpringData数据访问JPA</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.youyou-2608.com/2019/01/01/SpringBoot基础学习笔记/" data-id="ck2sphczx007ics4nwbip1mim"
         class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习笔记/">学习笔记</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        

<article id="post-周末随想" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/12/31/周末随想/">周末随想</a>
    </h2>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2018/12/31/周末随想/" class="article-date">
  <time datetime="2018-12-30T16:02:19.000Z" itemprop="datePublished">12-31-2018</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/随便写写/">随便写写</a>
  </div>

      </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      
	    

	  
      
        <blockquote>
<p>我们对于时间流逝的恐惧，不在于年龄增长带来的容颜衰老，而是光阴逝去，我们仍然一无所得。</p>
</blockquote>
<p>似乎从17年下半年实习完回到学校之后，时间就走得越来越快，平日里忙忙碌碌，稍有空闲偶然抬头，夕阳已在靠近山头。不知是我自己的错觉，还是周围的人也有同样的感觉。</p>
<p>工作近半年，我的潜意识似乎还停在六七月份，提着行李刚刚踏出校门的时候，尽管每天走出家门越来越冷的天气都会提醒我18年已然所剩无几。终于，18年就要过去了，我应该会从这仿佛停滞的潜意识中走出来吧。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4371.JPG" alt="入冬的第一场雪"></p>
<p>早上下楼，在花池边上看到的一颗爱心，趁还没被雪覆盖之前，拍了下来。</p>
<p>元旦假期刚好碰上了周末，新的一年应该算是一个重新振作、重新迈出脚步的好时机，对于我这样一段时间就会心血来潮把所有物品重新收拾一遍的人来说，这个周末可以说是一个一年一遇的好机会了。</p>
<p>周六早上还是照旧睡了个懒觉，起来吃个饭已经三点钟了。阳光明媚寒风凛冽的冬天自然是不适合出门的，下午就在网上冲浪，几个小时过得还算快。逛了会儿贴吧（因为发了句“苟利国家生死以”号被永封了，现在的社交媒体还是心理太敏感。）</p>
<p>晚上才意识到这就是年末了，其实我以为是周六是31号，就把家里彻彻底底收拾了一遍，收拾完已经是十二点了。又翻出了很多以前的东西，实习时候的、支教时候的、从大一到大四平时收集的纪念品（我有收藏的习惯，虽然只是一张草稿纸，也能让我在多年以后仍能回忆起N年前的那一刻的处境和想法。）</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4672.JPG" alt="支教班级刘夕夕送我的临别礼物"></p>
<p>今天晚上又在这本工数二里翻出了不少回忆。其实早已经忘了里面的内容。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4673.JPG" alt="刘夕夕送我的临别礼物"></p>
<p>好像大多数学生对我的评价都是善良、温柔、帅。。</p>
<p>虽然两年多过去了，依然清晰的记得对她的印象，上课捣蛋，不听话，其实并不是她的本性就是这样，她只是想用一些极端的方式引起别人对她的注意。后来，她生病了，她所说的“关心”大概就是每次上课之前我都问问她的病情，记得在送别会上哭了很长时间。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4674.JPG" alt="肖安福送我的临别礼物"></p>
<p>这也太真实了吧，矮我也就认了，这是我第一次听到有人说我丑的，小小年纪就懂得先抑后扬，将来可能会成为大文豪。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4675.JPG" alt="第一次坐上海磁浮列车"></p>
<p>这大概是16年冬天的时候去厦门，路过上海，特意去体验了上海磁浮。坐在飞驰的列车里，看着窗外高速公路上仿佛停止的车流，英语老师讲课的场景又在脑海中浮现出来。外研版英语教材中有一个单元的主题就是上海磁悬浮列车。黑板上的屏幕里放着老师当年在磁浮列车中拍摄的视频，窗外也是阳光明媚，屏幕里的高速公路和此刻我眼中所见别无二样，一闪而过、飞一般后退的风景，给人一种莫名的安心。曾经盼不到下课的45分钟在此刻却是如此短暂，只是此刻耳边响起的不再是熟悉动听的下课铃声，而是从未听到过的到站提醒。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4676%2820181230-115349%29.jpg" alt="四六级准考证"></p>
<p>至今让然保存着一次英语四级、三次英语六级、一次日语N2、一次日语N1考试的准考证。英语四级455、六级第一次375、第二次404、第三次530，日语N2 125、N1 108。总算是有心人，天不负吧。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4677%2820181230-115350%29.jpg" alt="爱心包裹募捐"></p>
<p>这是大二的时候去参加学校的“爱心包裹”募捐活动，那也是一个冬天，因为起得比较晚，没吃早饭没吃中午饭便去了开发区安盛广场。冒着寒风，厚着脸皮，从两点到四点半，和隔壁班搭档两个人募到了600，没有人比我们更高了，当时给我们开心得不行，在冒着小雨去管委会集合的路上，遇到一个撑伞的老奶奶，给我捐了100，还给我了一个翻墙工具光盘，让我们去了解法轮功真相。去邮政寄完钱，回到软院，终于在食堂吃上了第一顿饭，特意加了个鸡蛋奖励自己。满足的心情，至今记忆犹新。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4678%2820181230-115349%29.jpg" alt="院运动会"></p>
<p>大一时候的院运动会，参加了5公里长跑，14113号；大二时候的院运动会，参加了跳远，14116号。身边都是人高马大的，自卑了。。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4679.JPG" alt="庆祝建国65周年教职工合唱比赛"></p>
<p>合唱内容早已忘却，停在山上礼堂门口的那辆车却依然能清晰的记起来，“红旗”，一直觉得这个名字很响亮。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4684%2820181230-115349%29.jpg" alt="贵阳北—盘州"></p>
<p>16年12月沪昆高铁贵昆段开通，特意在贵阳转车，去体验经过家乡的高铁。第一次坐高铁，贵阳到家从四个小时缩短到一个小时，速度很快。16年底县里刚刚改名，从“盘县”改名到“盘州市”，所以每次看到这个“盘州站”，总给我一种陌生的感觉。贵阳北站的检票工具是一个💗（心）型，拍照的时候我特意在下面加了红色背景。从远方回家过年的人，看到车票上的这个爱心，应该会有一种温暖和感动的感觉吧，至少我是这样的。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4687.JPG" alt="四年坐过的火车"></p>
<p>把所有的车票集到一起才发现，原来坐着火车也去过不少地方呢。最常去的城市是六盘水、北京和大连；到过贵阳、厦门、三明、上海、西安、南昌、石家庄、烟台、郑州、北京、西安、广州、南宁、鞍山。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4688.JPG" alt="希望回忆也能保鲜"></p>
<p>北京房东奶奶送我的咖啡和糖、支教学生们的给我的联系方式和信件、嘉年华消费券…以前总是无意间就将想永久珍藏的东西放到这个保鲜盒中，渐渐地成为了习惯；后来我常常在想，食物放到保鲜盒中就能保持新鲜，那回忆呢，放到保鲜盒中也能永远保持新鲜吗？</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4689.JPG" alt="将回忆放到角落里吧"></p>
<p>一直记得去年的动漫《少女终末旅行》中有一句令人印象深刻的台词：記憶なんて、生きるの邪魔しかない（我将其翻译为：回忆，不过是生活的绊脚石）。如果你总是往后看，那会走得缓慢，把过去都藏到角落里，生活该大步的往前走，回忆，只适合在某个无所事事阴雨绵绵的晚上，翻出来打发时间。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4692.JPG" alt="不小心洒了一地的硬币"></p>
<p>收拾东西，想把硬币都擦一擦，因为太重，盒子裂开了，硬币洒了一地。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4695.JPG" alt="整理完的小桌子"></p>
<p>把桌子上的东西都擦了一遍。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4709.JPG" alt="收拾完的桌子"></p>
<p>把桌子上的东西都擦了一遍，给绿萝也擦了叶子。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4704.JPG" alt="收到了相机"></p>
<p>周天和学弟打了一下午的台球，一起吃了顿饭。晚上回来取到了相机。以后周末能多出去转转了，在这座城市生活了四年，却没去过几个地方，很是惭愧。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4707.JPG" alt="同事出差回来带的零食"></p>
<p>出差两个月的室友今天晚上回来了，带了一些日本的零食。</p>
<p><img src="https://image.youyou-2608.com/blog/IMG_4702.PNG" alt="坚持减肥"></p>
<p>坚持减肥十二天了，争取在春节之前减到100。</p>
<p>不知不觉写了一个小时，也该睡觉了，明天还要上班，明天就是18年最后一天了，该好好想想怎么跨年了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.youyou-2608.com/2018/12/31/周末随想/" data-id="ck2sphcze006zcs4nef6dkftg"
         class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随便写写/">随便写写</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
  </article>
  

  
    <nav class="page-nav">
      
      <a class="extend prev" rel="prev" href="/page/5/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/7/">下一页</a>
    </nav>
  
</section>
</div>

  <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>&copy; 2018-2019 Kanna-Makino</li>
      <div class="float-right">
      	全站共&nbsp;<span class="post-count">62.5k</span>&nbsp;字&nbsp;&nbsp;&nbsp;
      	<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("11/11/2018 00:00:00");//此处修改你的建站时间或者网站上线时间 
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "已运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
	setInterval("createtime()",250);
</script>

	  </div>
    </ul>
  </div>
</footer>

</main>

  <aside class="sidebar">
    
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="https://image.youyou-2608.com/Kanna.svg" alt="Kanna-Makino"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">主页</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">归档</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">相册</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">关于</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

  <script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/ocean.js"></script>

</body>
</html>